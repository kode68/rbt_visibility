{"ast":null,"code":"// src/index.jsx\nimport React from\"react\";import ReactDOM from\"react-dom/client\";import\"./index.css\";import{BrowserRouter,Routes,Route,Navigate}from\"react-router-dom\";import App from\"./App\";import AuthProvider,{useAuth,ProtectedRoute}from\"./auth/AuthProvider\";import Login from\"./pages/Login\";import Signup from\"./pages/Signup\";// ðŸ‘ˆ add this\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function LoadingScreen(){return/*#__PURE__*/_jsx(\"div\",{style:{textAlign:\"center\",padding:\"2rem\"},children:/*#__PURE__*/_jsx(\"p\",{children:\"Loading...\"})});}class ErrorBoundary extends React.Component{constructor(props){super(props);this.state={hasError:false};}static getDerivedStateFromError(){return{hasError:true};}componentDidCatch(error,info){console.error(\"[App Error]\",error,info);}render(){if(this.state.hasError){return/*#__PURE__*/_jsxs(\"div\",{style:{textAlign:\"center\",padding:\"2rem\",color:\"crimson\"},children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Something went wrong.\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Please refresh the page.\"})]});}return this.props.children;}}function Forbidden(){return/*#__PURE__*/_jsxs(\"div\",{style:{textAlign:\"center\",padding:\"2rem\"},children:[/*#__PURE__*/_jsx(\"h2\",{children:\"403 \\u2014 Not allowed\"}),/*#__PURE__*/_jsx(\"p\",{children:\"You don\\u2019t have permission to view this page.\"}),/*#__PURE__*/_jsx(\"a\",{href:\"/\",children:\"Go Home\"})]});}function RouterWithAuthGate(){const{loading}=useAuth();if(loading)return/*#__PURE__*/_jsx(LoadingScreen,{});return/*#__PURE__*/_jsxs(Routes,{children:[/*#__PURE__*/_jsx(Route,{path:\"/login\",element:/*#__PURE__*/_jsx(Login,{})}),/*#__PURE__*/_jsx(Route,{path:\"/signup\",element:/*#__PURE__*/_jsx(Signup,{})}),\" \",/*#__PURE__*/_jsx(Route,{path:\"/*\",element:/*#__PURE__*/_jsx(ProtectedRoute,{roles:[\"viewer\",\"admin\",\"super_admin\"],children:/*#__PURE__*/_jsx(App,{})})}),/*#__PURE__*/_jsx(Route,{path:\"/403\",element:/*#__PURE__*/_jsx(Forbidden,{})}),/*#__PURE__*/_jsx(Route,{path:\"*\",element:/*#__PURE__*/_jsx(Navigate,{to:\"/\",replace:true})})]});}ReactDOM.createRoot(document.getElementById(\"root\")).render(/*#__PURE__*/_jsx(React.StrictMode,{children:/*#__PURE__*/_jsx(ErrorBoundary,{children:/*#__PURE__*/_jsx(AuthProvider,{children:/*#__PURE__*/_jsx(BrowserRouter,{children:/*#__PURE__*/_jsx(RouterWithAuthGate,{})})})})}));","map":{"version":3,"names":["React","ReactDOM","BrowserRouter","Routes","Route","Navigate","App","AuthProvider","useAuth","ProtectedRoute","Login","Signup","jsx","_jsx","jsxs","_jsxs","LoadingScreen","style","textAlign","padding","children","ErrorBoundary","Component","constructor","props","state","hasError","getDerivedStateFromError","componentDidCatch","error","info","console","render","color","Forbidden","href","RouterWithAuthGate","loading","path","element","roles","to","replace","createRoot","document","getElementById","StrictMode"],"sources":["C:/Users/mis/rbt-dashboard/src/index.js"],"sourcesContent":["// src/index.jsx\r\nimport React from \"react\";\r\nimport ReactDOM from \"react-dom/client\";\r\nimport \"./index.css\";\r\nimport { BrowserRouter, Routes, Route, Navigate } from \"react-router-dom\";\r\nimport App from \"./App\";\r\nimport AuthProvider, { useAuth, ProtectedRoute } from \"./auth/AuthProvider\";\r\nimport Login from \"./pages/Login\";\r\nimport Signup from \"./pages/Signup\"; // ðŸ‘ˆ add this\r\n\r\nfunction LoadingScreen() {\r\n    return (\r\n        <div style={{ textAlign: \"center\", padding: \"2rem\" }}>\r\n            <p>Loading...</p>\r\n        </div>\r\n    );\r\n}\r\n\r\nclass ErrorBoundary extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = { hasError: false };\r\n    }\r\n    static getDerivedStateFromError() {\r\n        return { hasError: true };\r\n    }\r\n    componentDidCatch(error, info) {\r\n        console.error(\"[App Error]\", error, info);\r\n    }\r\n    render() {\r\n        if (this.state.hasError) {\r\n            return (\r\n                <div style={{ textAlign: \"center\", padding: \"2rem\", color: \"crimson\" }}>\r\n                    <h2>Something went wrong.</h2>\r\n                    <p>Please refresh the page.</p>\r\n                </div>\r\n            );\r\n        }\r\n        return this.props.children;\r\n    }\r\n}\r\n\r\nfunction Forbidden() {\r\n    return (\r\n        <div style={{ textAlign: \"center\", padding: \"2rem\" }}>\r\n            <h2>403 â€” Not allowed</h2>\r\n            <p>You donâ€™t have permission to view this page.</p>\r\n            <a href=\"/\">Go Home</a>\r\n        </div>\r\n    );\r\n}\r\n\r\nfunction RouterWithAuthGate() {\r\n    const { loading } = useAuth();\r\n    if (loading) return <LoadingScreen />;\r\n\r\n    return (\r\n        <Routes>\r\n            {/* Public routes */}\r\n            <Route path=\"/login\" element={<Login />} />\r\n            <Route path=\"/signup\" element={<Signup />} /> {/* ðŸ‘ˆ add this */}\r\n\r\n            {/* Protected app (any logged-in role) */}\r\n            <Route\r\n                path=\"/*\"\r\n                element={\r\n                    <ProtectedRoute roles={[\"viewer\", \"admin\", \"super_admin\"]}>\r\n                        <App />\r\n                    </ProtectedRoute>\r\n                }\r\n            />\r\n\r\n            {/* Forbidden + fallback */}\r\n            <Route path=\"/403\" element={<Forbidden />} />\r\n            <Route path=\"*\" element={<Navigate to=\"/\" replace />} />\r\n        </Routes>\r\n    );\r\n}\r\n\r\nReactDOM.createRoot(document.getElementById(\"root\")).render(\r\n    <React.StrictMode>\r\n        <ErrorBoundary>\r\n            <AuthProvider>\r\n                <BrowserRouter>\r\n                    <RouterWithAuthGate />\r\n                </BrowserRouter>\r\n            </AuthProvider>\r\n        </ErrorBoundary>\r\n    </React.StrictMode>\r\n);\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}