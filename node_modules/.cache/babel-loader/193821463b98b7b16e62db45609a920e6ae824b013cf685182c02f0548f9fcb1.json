{"ast":null,"code":"// src/auth/AuthProvider.jsx\nimport React,{createContext,useContext,useEffect,useMemo,useState}from\"react\";import{onAuthStateChanged,signOut,getIdTokenResult}from\"firebase/auth\";import{doc,getDoc,setDoc,serverTimestamp}from\"firebase/firestore\";import{auth,db}from\"../firebase\";import{Navigate}from\"react-router-dom\";/**\r\n * CONFIG (tweak as needed)\r\n * - In emulator/local mode, these checks are relaxed automatically.\r\n */import{jsx as _jsx}from\"react/jsx-runtime\";const ALLOWED_DOMAINS=[];// e.g., [\"brightbots.com\"]\nconst ENFORCE_VERIFIED_EMAIL=false;// set true to require verified emails in PROD\n// Helper: detect if we’re using emulators (set by firebase.js)\nconst usingEmulators=(()=>{try{var _window,_window$__FIREBASE__;return Boolean((_window=window)===null||_window===void 0?void 0:(_window$__FIREBASE__=_window.__FIREBASE__)===null||_window$__FIREBASE__===void 0?void 0:_window$__FIREBASE__.useEmulators);}catch{return false;}})();const AuthContext=/*#__PURE__*/createContext(null);export const useAuth=()=>useContext(AuthContext);/**\r\n * Role precedence (string)\r\n * - Keep simple: \"viewer\" < \"admin\" < \"super_admin\"\r\n */const normalizeRole=val=>[\"viewer\",\"admin\",\"super_admin\"].includes(val)?val:\"viewer\";/**\r\n * Create or patch users/{uid} profile on first login.\r\n */async function ensureUserProfile(user){if(!(user!==null&&user!==void 0&&user.uid))return null;const ref=doc(db,\"users\",user.uid);const snap=await getDoc(ref);if(!snap.exists()){const payload={email:user.email||null,name:user.displayName||null,role:\"viewer\",// default\nphotoURL:user.photoURL||null,createdAt:serverTimestamp(),lastLoginAt:serverTimestamp()};await setDoc(ref,payload,{merge:true});return payload;}else{// Update lastLoginAt on each login\nawait setDoc(ref,{lastLoginAt:serverTimestamp()},{merge:true});return snap.data();}}/**\r\n * Fetch role from Firestore users/{uid}.\r\n * Fallback to \"viewer\" if not present or offline.\r\n */async function fetchUserRole(uid){try{var _snap$data;const snap=await getDoc(doc(db,\"users\",uid));if(snap.exists())return normalizeRole((_snap$data=snap.data())===null||_snap$data===void 0?void 0:_snap$data.role);}catch(_){}return\"viewer\";}export default function AuthProvider(_ref){let{children}=_ref;const[user,setUser]=useState(null);const[claims,setClaims]=useState(null);const[role,setRole]=useState(null);const[loading,setLoading]=useState(true);const[authError,setAuthError]=useState(\"\");useEffect(()=>{const unsub=onAuthStateChanged(auth,async fbUser=>{setLoading(true);setAuthError(\"\");setClaims(null);setRole(null);setUser(fbUser||null);if(!fbUser){setLoading(false);return;}try{// Optional: pull custom claims (works even in emulator)\nconst tokenRes=await getIdTokenResult(fbUser);setClaims((tokenRes===null||tokenRes===void 0?void 0:tokenRes.claims)||null);// Create/patch profile on first login, then read role\nawait ensureUserProfile(fbUser);const fetchedRole=await fetchUserRole(fbUser.uid);setRole(fetchedRole);// PROD-only checks (auto-relaxed in emulator)\nif(!usingEmulators){// Allowed domain gate\nif(ALLOWED_DOMAINS.length>0&&fbUser.email){const ok=ALLOWED_DOMAINS.some(d=>fbUser.email.toLowerCase().endsWith(`@${d.toLowerCase()}`));if(!ok){setAuthError(\"unauthorized-domain\");await signOut(auth);setLoading(false);return;}}// Verified email gate\nif(ENFORCE_VERIFIED_EMAIL&&!fbUser.emailVerified){setAuthError(\"email-not-verified\");await signOut(auth);setLoading(false);return;}}setLoading(false);}catch(e){console.error(\"[AuthProvider] error:\",e);setAuthError((e===null||e===void 0?void 0:e.code)||\"auth-internal-error\");// Don’t sign out automatically; surface error and keep state\nsetLoading(false);}});return()=>unsub();},[]);const value=useMemo(()=>{const isViewer=role===\"viewer\";const isAdmin=role===\"admin\"||role===\"super_admin\";const isSuperAdmin=role===\"super_admin\";// Simple can() helper for UI gating\nconst can=action=>{switch(action){case\"read:any\":return Boolean(user);case\"write:standard\":return isAdmin||isSuperAdmin;case\"write:dangerous\":return isSuperAdmin;default:return false;}};return{user,role,claims,loading,error:authError,usingEmulators,isViewer,isAdmin,isSuperAdmin,can};},[user,role,claims,loading,authError]);return/*#__PURE__*/_jsx(AuthContext.Provider,{value:value,children:children});}/**\r\n * ProtectedRoute\r\n * - Usage:\r\n *   <Route\r\n *     path=\"/admin\"\r\n *     element={\r\n *       <ProtectedRoute roles={[\"admin\",\"super_admin\"]}>\r\n *         <AdminPage/>\r\n *       </ProtectedRoute>\r\n *     }\r\n *   />\r\n */export function ProtectedRoute(_ref2){let{roles,children,fallback=\"/login\"}=_ref2;const{user,role,loading}=useAuth();if(loading)return null;// or a spinner\nif(!user)return/*#__PURE__*/_jsx(Navigate,{to:fallback,replace:true});if(roles&&roles.length>0){const ok=roles.includes(role);if(!ok)return/*#__PURE__*/_jsx(Navigate,{to:\"/403\",replace:true});}return children;}/**\r\n * RoleGate\r\n * - Inline gate for components:\r\n *   <RoleGate allow={[\"super_admin\"]}>\r\n *     <DangerZone/>\r\n *   </RoleGate>\r\n */export function RoleGate(_ref3){let{allow=[],children,fallback=null}=_ref3;const{role}=useAuth();if(allow.length===0)return children;return allow.includes(role)?children:fallback;}","map":{"version":3,"names":["React","createContext","useContext","useEffect","useMemo","useState","onAuthStateChanged","signOut","getIdTokenResult","doc","getDoc","setDoc","serverTimestamp","auth","db","Navigate","jsx","_jsx","ALLOWED_DOMAINS","ENFORCE_VERIFIED_EMAIL","usingEmulators","_window","_window$__FIREBASE__","Boolean","window","__FIREBASE__","useEmulators","AuthContext","useAuth","normalizeRole","val","includes","ensureUserProfile","user","uid","ref","snap","exists","payload","email","name","displayName","role","photoURL","createdAt","lastLoginAt","merge","data","fetchUserRole","_snap$data","_","AuthProvider","_ref","children","setUser","claims","setClaims","setRole","loading","setLoading","authError","setAuthError","unsub","fbUser","tokenRes","fetchedRole","length","ok","some","d","toLowerCase","endsWith","emailVerified","e","console","error","code","value","isViewer","isAdmin","isSuperAdmin","can","action","Provider","ProtectedRoute","_ref2","roles","fallback","to","replace","RoleGate","_ref3","allow"],"sources":["C:/Users/mis/rbt-dashboard/src/auth/AuthProvider.jsx"],"sourcesContent":["// src/auth/AuthProvider.jsx\r\nimport React, { createContext, useContext, useEffect, useMemo, useState } from \"react\";\r\nimport { onAuthStateChanged, signOut, getIdTokenResult } from \"firebase/auth\";\r\nimport {\r\n    doc,\r\n    getDoc,\r\n    setDoc,\r\n    serverTimestamp,\r\n} from \"firebase/firestore\";\r\nimport { auth, db } from \"../firebase\";\r\nimport { Navigate } from \"react-router-dom\";\r\n\r\n/**\r\n * CONFIG (tweak as needed)\r\n * - In emulator/local mode, these checks are relaxed automatically.\r\n */\r\nconst ALLOWED_DOMAINS = []; // e.g., [\"brightbots.com\"]\r\nconst ENFORCE_VERIFIED_EMAIL = false; // set true to require verified emails in PROD\r\n\r\n// Helper: detect if we’re using emulators (set by firebase.js)\r\nconst usingEmulators = (() => {\r\n    try {\r\n        return Boolean(window?.__FIREBASE__?.useEmulators);\r\n    } catch {\r\n        return false;\r\n    }\r\n})();\r\n\r\nconst AuthContext = createContext(null);\r\nexport const useAuth = () => useContext(AuthContext);\r\n\r\n/**\r\n * Role precedence (string)\r\n * - Keep simple: \"viewer\" < \"admin\" < \"super_admin\"\r\n */\r\nconst normalizeRole = (val) => ([\"viewer\", \"admin\", \"super_admin\"].includes(val) ? val : \"viewer\");\r\n\r\n/**\r\n * Create or patch users/{uid} profile on first login.\r\n */\r\nasync function ensureUserProfile(user) {\r\n    if (!user?.uid) return null;\r\n    const ref = doc(db, \"users\", user.uid);\r\n    const snap = await getDoc(ref);\r\n\r\n    if (!snap.exists()) {\r\n        const payload = {\r\n            email: user.email || null,\r\n            name: user.displayName || null,\r\n            role: \"viewer\", // default\r\n            photoURL: user.photoURL || null,\r\n            createdAt: serverTimestamp(),\r\n            lastLoginAt: serverTimestamp(),\r\n        };\r\n        await setDoc(ref, payload, { merge: true });\r\n        return payload;\r\n    } else {\r\n        // Update lastLoginAt on each login\r\n        await setDoc(ref, { lastLoginAt: serverTimestamp() }, { merge: true });\r\n        return snap.data();\r\n    }\r\n}\r\n\r\n/**\r\n * Fetch role from Firestore users/{uid}.\r\n * Fallback to \"viewer\" if not present or offline.\r\n */\r\nasync function fetchUserRole(uid) {\r\n    try {\r\n        const snap = await getDoc(doc(db, \"users\", uid));\r\n        if (snap.exists()) return normalizeRole(snap.data()?.role);\r\n    } catch (_) {\r\n\r\n    }\r\n    return \"viewer\";\r\n}\r\n\r\nexport default function AuthProvider({ children }) {\r\n    const [user, setUser] = useState(null);\r\n    const [claims, setClaims] = useState(null);\r\n    const [role, setRole] = useState(null);\r\n    const [loading, setLoading] = useState(true);\r\n    const [authError, setAuthError] = useState(\"\");\r\n\r\n    useEffect(() => {\r\n        const unsub = onAuthStateChanged(auth, async (fbUser) => {\r\n            setLoading(true);\r\n            setAuthError(\"\");\r\n            setClaims(null);\r\n            setRole(null);\r\n            setUser(fbUser || null);\r\n\r\n            if (!fbUser) {\r\n                setLoading(false);\r\n                return;\r\n            }\r\n\r\n            try {\r\n                // Optional: pull custom claims (works even in emulator)\r\n                const tokenRes = await getIdTokenResult(fbUser);\r\n                setClaims(tokenRes?.claims || null);\r\n\r\n                // Create/patch profile on first login, then read role\r\n                await ensureUserProfile(fbUser);\r\n                const fetchedRole = await fetchUserRole(fbUser.uid);\r\n                setRole(fetchedRole);\r\n\r\n                // PROD-only checks (auto-relaxed in emulator)\r\n                if (!usingEmulators) {\r\n                    // Allowed domain gate\r\n                    if (ALLOWED_DOMAINS.length > 0 && fbUser.email) {\r\n                        const ok = ALLOWED_DOMAINS.some((d) =>\r\n                            fbUser.email.toLowerCase().endsWith(`@${d.toLowerCase()}`)\r\n                        );\r\n                        if (!ok) {\r\n                            setAuthError(\"unauthorized-domain\");\r\n                            await signOut(auth);\r\n                            setLoading(false);\r\n                            return;\r\n                        }\r\n                    }\r\n                    // Verified email gate\r\n                    if (ENFORCE_VERIFIED_EMAIL && !fbUser.emailVerified) {\r\n                        setAuthError(\"email-not-verified\");\r\n                        await signOut(auth);\r\n                        setLoading(false);\r\n                        return;\r\n                    }\r\n                }\r\n\r\n                setLoading(false);\r\n            } catch (e) {\r\n                console.error(\"[AuthProvider] error:\", e);\r\n                setAuthError(e?.code || \"auth-internal-error\");\r\n                // Don’t sign out automatically; surface error and keep state\r\n                setLoading(false);\r\n            }\r\n        });\r\n\r\n        return () => unsub();\r\n    }, []);\r\n\r\n    const value = useMemo(() => {\r\n        const isViewer = role === \"viewer\";\r\n        const isAdmin = role === \"admin\" || role === \"super_admin\";\r\n        const isSuperAdmin = role === \"super_admin\";\r\n\r\n        // Simple can() helper for UI gating\r\n        const can = (action) => {\r\n            switch (action) {\r\n                case \"read:any\":\r\n                    return Boolean(user);\r\n                case \"write:standard\":\r\n                    return isAdmin || isSuperAdmin;\r\n                case \"write:dangerous\":\r\n                    return isSuperAdmin;\r\n                default:\r\n                    return false;\r\n            }\r\n        };\r\n\r\n        return {\r\n            user,\r\n            role,\r\n            claims,\r\n            loading,\r\n            error: authError,\r\n            usingEmulators,\r\n            isViewer,\r\n            isAdmin,\r\n            isSuperAdmin,\r\n            can,\r\n        };\r\n    }, [user, role, claims, loading, authError]);\r\n\r\n    return <AuthContext.Provider value={value}>{children}</AuthContext.Provider>;\r\n}\r\n\r\n/**\r\n * ProtectedRoute\r\n * - Usage:\r\n *   <Route\r\n *     path=\"/admin\"\r\n *     element={\r\n *       <ProtectedRoute roles={[\"admin\",\"super_admin\"]}>\r\n *         <AdminPage/>\r\n *       </ProtectedRoute>\r\n *     }\r\n *   />\r\n */\r\nexport function ProtectedRoute({ roles, children, fallback = \"/login\" }) {\r\n    const { user, role, loading } = useAuth();\r\n\r\n    if (loading) return null; // or a spinner\r\n    if (!user) return <Navigate to={fallback} replace />;\r\n\r\n    if (roles && roles.length > 0) {\r\n        const ok = roles.includes(role);\r\n        if (!ok) return <Navigate to=\"/403\" replace />;\r\n    }\r\n\r\n    return children;\r\n}\r\n\r\n/**\r\n * RoleGate\r\n * - Inline gate for components:\r\n *   <RoleGate allow={[\"super_admin\"]}>\r\n *     <DangerZone/>\r\n *   </RoleGate>\r\n */\r\nexport function RoleGate({ allow = [], children, fallback = null }) {\r\n    const { role } = useAuth();\r\n    if (allow.length === 0) return children;\r\n    return allow.includes(role) ? children : fallback;\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}