{"ast":null,"code":"import _objectSpread from\"C:/Users/mis/rbt-dashboard/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useEffect,useState}from\"react\";import{collection,getDocs,doc,updateDoc,serverTimestamp}from\"firebase/firestore\";import{db,auth}from\"../firebase\";import{format,differenceInDays}from\"date-fns\";import{useAuthState}from\"react-firebase-hooks/auth\";import{useNavigate}from\"react-router-dom\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const OverallDashboard=()=>{const[clients,setClients]=useState([]);const[selectedClient,setSelectedClient]=useState(\"\");const[rbts,setRbts]=useState([]);const[filtered,setFiltered]=useState([]);const[loading,setLoading]=useState(true);const[userRole,setUserRole]=useState(\"user\");const[filters,setFilters]=useState({site:\"\",running_status:\"\",breakdown_status:\"\",work:\"\",from:\"\",to:\"\"});const[user,authLoading]=useAuthState(auth);const navigate=useNavigate();const runningStatusOptions=[{value:\"Auto\",label:\"Auto\"},{value:\"Manual\",label:\"Manual\"},{value:\"Not Running\",label:\"Not Running\"},{value:\"N/A\",label:\"N/A\"}];const breakdownStatusOptions=[{value:\"Breakdown\",label:\"Breakdown\"},{value:\"Running With Issue\",label:\"Running With Issue\"},{value:\"N/A\",label:\"N/A\"}];const workOptions=[{value:\"Part Installation\",label:\"Part Installation\"},{value:\"Part Testing\",label:\"Part Testing\"},{value:\"Trial\",label:\"Trial\"},{value:\"Auto Scheduling\",label:\"Auto Scheduling\"},{value:\"N/A\",label:\"N/A\"}];// ðŸ”’ Super-admin gate\nuseEffect(()=>{if(authLoading)return;if(!user){navigate(\"/login\",{replace:true});return;}if(user.email!==\"dev@brightbots.in\"){navigate(\"/dashboard\",{replace:true});return;}setUserRole(\"super_admin\");},[user,authLoading,navigate]);// âœ… Fetch all clients\nuseEffect(()=>{const fetchClients=async()=>{try{const snapshot=await getDocs(collection(db,\"clients\"));setClients(snapshot.docs.map(docSnap=>_objectSpread({id:docSnap.id},docSnap.data())));}catch(err){console.error(\"Error fetching clients:\",err);}};fetchClients();},[]);// âœ… Fetch all RBTs for selected client\nuseEffect(()=>{if(!selectedClient)return;let interval;const fetchAllRBTs=async()=>{try{setLoading(true);const sitesSnapshot=await getDocs(collection(db,\"clients\",selectedClient,\"sites\"));let allRbts=[];for(const siteDoc of sitesSnapshot.docs){const siteName=siteDoc.id;const rbtsSnapshot=await getDocs(collection(db,\"clients\",selectedClient,\"sites\",siteName,\"rbts\"));const siteRbts=rbtsSnapshot.docs.map(docItem=>{var _rbt$last_updated,_rbt$last_updated$toD;const rbt=docItem.data()||{};const lastUpdated=(rbt===null||rbt===void 0?void 0:(_rbt$last_updated=rbt.last_updated)===null||_rbt$last_updated===void 0?void 0:(_rbt$last_updated$toD=_rbt$last_updated.toDate)===null||_rbt$last_updated$toD===void 0?void 0:_rbt$last_updated$toD.call(_rbt$last_updated))||null;return _objectSpread(_objectSpread({id:docItem.id,rbt_id:docItem.id,site:siteName},rbt),{},{running_status:rbt.running_status||\"N/A\",breakdown_status:rbt.breakdown_status||\"N/A\",work:rbt.work||\"N/A\",last_updated:lastUpdated,running_status_ageing:rbt.running_status===\"Auto\"?0:lastUpdated?Math.max(differenceInDays(new Date(),lastUpdated),0):\"-\"});});allRbts=[...allRbts,...siteRbts];}setRbts(allRbts);setFiltered(allRbts);}catch(error){console.error(\"Error fetching RBTs:\",error);}finally{setLoading(false);}};fetchAllRBTs();interval=setInterval(fetchAllRBTs,30000);return()=>clearInterval(interval);},[selectedClient]);// âœ… Apply filters\nuseEffect(()=>{let result=[...rbts];if(filters.site)result=result.filter(rbt=>rbt.site===filters.site);if(filters.running_status)result=result.filter(rbt=>rbt.running_status===filters.running_status);if(filters.breakdown_status)result=result.filter(rbt=>rbt.breakdown_status===filters.breakdown_status);if(filters.work)result=result.filter(rbt=>rbt.work===filters.work);if(filters.from){const fromDate=new Date(filters.from);if(!isNaN(fromDate))result=result.filter(rbt=>rbt.last_updated&&rbt.last_updated>=fromDate);}if(filters.to){const toDate=new Date(filters.to);if(!isNaN(toDate))result=result.filter(rbt=>rbt.last_updated&&rbt.last_updated<=toDate);}setFiltered(result);},[filters,rbts]);const handleFilterChange=e=>setFilters(prev=>_objectSpread(_objectSpread({},prev),{},{[e.target.name]:e.target.value}));const handleExportCSV=()=>{const headers=[\"Site\",\"RBT\",\"Running Status\",\"Breakdown Status\",\"Work\",\"Ageing\",\"Last Updated\"];const rows=filtered.map(rbt=>[rbt.site,rbt.rbt_id,rbt.running_status,rbt.breakdown_status,rbt.work,rbt.running_status_ageing,rbt.last_updated?format(rbt.last_updated,\"yyyy-MM-dd HH:mm\"):\"-\"]);const escapeCSV=val=>\"\\\"\".concat(String(val||\"\").replace(/\"/g,'\"\"'),\"\\\"\");const csvContent=[headers,...rows].map(row=>row.map(escapeCSV).join(\",\")).join(\"\\n\");const blob=new Blob([csvContent],{type:\"text/csv;charset=utf-8;\"});const url=URL.createObjectURL(blob);const link=document.createElement(\"a\");link.href=url;link.setAttribute(\"download\",\"RBT_Dashboard_\".concat(Date.now(),\".csv\"));document.body.appendChild(link);link.click();document.body.removeChild(link);};const handleEditField=async(rbtId,site,field,value)=>{try{const ref=doc(db,\"clients\",selectedClient,\"sites\",site,\"rbts\",rbtId);const now=new Date();const updateData={[field]:String(value),last_updated:serverTimestamp()};if(field===\"running_status\"){updateData.running_status_ageing=value===\"Auto\"?0:0;}await updateDoc(ref,updateData);setRbts(prev=>prev.map(r=>r.id===rbtId?_objectSpread(_objectSpread(_objectSpread({},r),updateData),{},{last_updated:now,running_status_ageing:field===\"running_status\"?value===\"Auto\"?0:0:r.running_status_ageing}):r));}catch(error){console.error(\"Error updating field:\",error);}};const totalRBTs=filtered.length;const autoCount=filtered.filter(r=>r.running_status===\"Auto\").length;const manualCount=filtered.filter(r=>r.running_status===\"Manual\").length;const notRunningCount=filtered.filter(r=>r.running_status===\"Not Running\").length;return/*#__PURE__*/_jsxs(\"div\",{className:\"p-6\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-2xl font-bold mb-6\",children:\"\\uD83D\\uDCCA Overall RBT Dashboard\"}),/*#__PURE__*/_jsx(\"div\",{className:\"mb-4\",children:/*#__PURE__*/_jsxs(\"select\",{value:selectedClient,onChange:e=>setSelectedClient(e.target.value),className:\"border p-2 rounded-md\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Select Client\"}),clients.map(client=>/*#__PURE__*/_jsx(\"option\",{value:client.id,children:client.id},client.id))]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"bg-blue-100 p-4 rounded shadow text-center\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-lg font-semibold\",children:\"Total RBTs\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-2xl font-bold\",children:totalRBTs})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-green-100 p-4 rounded shadow text-center\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-lg font-semibold\",children:\"Auto\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-2xl font-bold\",children:autoCount})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-yellow-100 p-4 rounded shadow text-center\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-lg font-semibold\",children:\"Manual\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-2xl font-bold\",children:manualCount})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-red-100 p-4 rounded shadow text-center\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-lg font-semibold\",children:\"Not Running\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-2xl font-bold\",children:notRunningCount})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6\",children:[/*#__PURE__*/_jsxs(\"select\",{name:\"site\",value:filters.site,onChange:handleFilterChange,className:\"border p-2 rounded-md\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Filter by Site\"}),Array.from(new Set(rbts.map(rbt=>rbt.site))).filter(v=>v).map(val=>/*#__PURE__*/_jsx(\"option\",{value:val,children:val},val))]}),/*#__PURE__*/_jsxs(\"select\",{name:\"running_status\",value:filters.running_status,onChange:handleFilterChange,className:\"border p-2 rounded-md\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Filter by Running Status\"}),runningStatusOptions.map(opt=>/*#__PURE__*/_jsx(\"option\",{value:opt.value,children:opt.label},opt.value))]}),/*#__PURE__*/_jsxs(\"select\",{name:\"breakdown_status\",value:filters.breakdown_status,onChange:handleFilterChange,className:\"border p-2 rounded-md\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Filter by Breakdown Status\"}),breakdownStatusOptions.map(opt=>/*#__PURE__*/_jsx(\"option\",{value:opt.value,children:opt.label},opt.value))]}),/*#__PURE__*/_jsxs(\"select\",{name:\"work\",value:filters.work,onChange:handleFilterChange,className:\"border p-2 rounded-md\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Filter by Work\"}),workOptions.map(opt=>/*#__PURE__*/_jsx(\"option\",{value:opt.value,children:opt.label},opt.value))]}),/*#__PURE__*/_jsx(\"input\",{type:\"date\",name:\"from\",value:filters.from,onChange:handleFilterChange,className:\"border p-2 rounded-md\"}),/*#__PURE__*/_jsx(\"input\",{type:\"date\",name:\"to\",value:filters.to,onChange:handleFilterChange,className:\"border p-2 rounded-md\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"mb-4\",children:/*#__PURE__*/_jsx(\"button\",{onClick:handleExportCSV,className:\"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600\",children:\"Export CSV\"})}),loading?/*#__PURE__*/_jsx(\"p\",{children:\"Loading RBT data...\"}):/*#__PURE__*/_jsx(\"div\",{className:\"overflow-x-auto\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"min-w-full bg-white shadow-md rounded-lg\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{className:\"bg-gray-200 text-gray-600 uppercase text-sm\",children:[/*#__PURE__*/_jsx(\"th\",{className:\"py-3 px-4 text-left\",children:\"Site\"}),/*#__PURE__*/_jsx(\"th\",{className:\"py-3 px-4 text-left\",children:\"RBT\"}),/*#__PURE__*/_jsx(\"th\",{className:\"py-3 px-4 text-left\",children:\"Running\"}),/*#__PURE__*/_jsx(\"th\",{className:\"py-3 px-4 text-left\",children:\"Breakdown\"}),/*#__PURE__*/_jsx(\"th\",{className:\"py-3 px-4 text-left\",children:\"Work\"}),/*#__PURE__*/_jsx(\"th\",{className:\"py-3 px-4 text-left\",children:\"Ageing\"}),/*#__PURE__*/_jsx(\"th\",{className:\"py-3 px-4 text-left\",children:\"Last Updated\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{className:\"text-gray-700 text-sm\",children:filtered.map(rbt=>/*#__PURE__*/_jsxs(\"tr\",{className:\"border-b border-gray-200 hover:bg-gray-100\",children:[/*#__PURE__*/_jsx(\"td\",{className:\"py-2 px-4\",children:rbt.site}),/*#__PURE__*/_jsx(\"td\",{className:\"py-2 px-4\",children:rbt.rbt_id}),[\"running_status\",\"breakdown_status\",\"work\"].map(field=>/*#__PURE__*/_jsx(\"td\",{className:\"py-2 px-4\",children:userRole===\"admin\"||userRole===\"super_admin\"?/*#__PURE__*/_jsxs(\"select\",{value:rbt[field]||\"N/A\",onChange:e=>handleEditField(rbt.id,rbt.site,field,e.target.value),className:\"border p-1 rounded\",children:[field===\"running_status\"&&runningStatusOptions.map(opt=>/*#__PURE__*/_jsx(\"option\",{value:opt.value,children:opt.label},opt.value)),field===\"breakdown_status\"&&breakdownStatusOptions.map(opt=>/*#__PURE__*/_jsx(\"option\",{value:opt.value,children:opt.label},opt.value)),field===\"work\"&&workOptions.map(opt=>/*#__PURE__*/_jsx(\"option\",{value:opt.value,children:opt.label},opt.value))]}):rbt[field]||\"N/A\"},field)),/*#__PURE__*/_jsx(\"td\",{className:\"py-2 px-4 text-center\",children:rbt.running_status_ageing}),/*#__PURE__*/_jsx(\"td\",{className:\"py-2 px-4\",children:rbt.last_updated?format(rbt.last_updated,\"yyyy-MM-dd HH:mm\"):\"-\"})]},rbt.id))})]})})]});};export default OverallDashboard;","map":{"version":3,"names":["React","useEffect","useState","collection","getDocs","doc","updateDoc","serverTimestamp","db","auth","format","differenceInDays","useAuthState","useNavigate","jsx","_jsx","jsxs","_jsxs","OverallDashboard","clients","setClients","selectedClient","setSelectedClient","rbts","setRbts","filtered","setFiltered","loading","setLoading","userRole","setUserRole","filters","setFilters","site","running_status","breakdown_status","work","from","to","user","authLoading","navigate","runningStatusOptions","value","label","breakdownStatusOptions","workOptions","replace","email","fetchClients","snapshot","docs","map","docSnap","_objectSpread","id","data","err","console","error","interval","fetchAllRBTs","sitesSnapshot","allRbts","siteDoc","siteName","rbtsSnapshot","siteRbts","docItem","_rbt$last_updated","_rbt$last_updated$toD","rbt","lastUpdated","last_updated","toDate","call","rbt_id","running_status_ageing","Math","max","Date","setInterval","clearInterval","result","filter","fromDate","isNaN","handleFilterChange","e","prev","target","name","handleExportCSV","headers","rows","escapeCSV","val","concat","String","csvContent","row","join","blob","Blob","type","url","URL","createObjectURL","link","document","createElement","href","setAttribute","now","body","appendChild","click","removeChild","handleEditField","rbtId","field","ref","updateData","r","totalRBTs","length","autoCount","manualCount","notRunningCount","className","children","onChange","client","Array","Set","v","opt","onClick"],"sources":["C:/Users/mis/rbt-dashboard/src/pages/OverallDashboard.jsx"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport { collection, getDocs, doc, updateDoc, serverTimestamp } from \"firebase/firestore\";\r\nimport { db, auth } from \"../firebase\";\r\nimport { format, differenceInDays } from \"date-fns\";\r\nimport { useAuthState } from \"react-firebase-hooks/auth\";\r\nimport { useNavigate } from \"react-router-dom\";\r\n\r\nconst OverallDashboard = () => {\r\n    const [clients, setClients] = useState([]);\r\n    const [selectedClient, setSelectedClient] = useState(\"\");\r\n    const [rbts, setRbts] = useState([]);\r\n    const [filtered, setFiltered] = useState([]);\r\n    const [loading, setLoading] = useState(true);\r\n    const [userRole, setUserRole] = useState(\"user\");\r\n    const [filters, setFilters] = useState({\r\n        site: \"\",\r\n        running_status: \"\",\r\n        breakdown_status: \"\",\r\n        work: \"\",\r\n        from: \"\",\r\n        to: \"\",\r\n    });\r\n\r\n    const [user, authLoading] = useAuthState(auth);\r\n    const navigate = useNavigate();\r\n\r\n    const runningStatusOptions = [\r\n        { value: \"Auto\", label: \"Auto\" },\r\n        { value: \"Manual\", label: \"Manual\" },\r\n        { value: \"Not Running\", label: \"Not Running\" },\r\n        { value: \"N/A\", label: \"N/A\" },\r\n    ];\r\n\r\n    const breakdownStatusOptions = [\r\n        { value: \"Breakdown\", label: \"Breakdown\" },\r\n        { value: \"Running With Issue\", label: \"Running With Issue\" },\r\n        { value: \"N/A\", label: \"N/A\" },\r\n    ];\r\n\r\n    const workOptions = [\r\n        { value: \"Part Installation\", label: \"Part Installation\" },\r\n        { value: \"Part Testing\", label: \"Part Testing\" },\r\n        { value: \"Trial\", label: \"Trial\" },\r\n        { value: \"Auto Scheduling\", label: \"Auto Scheduling\" },\r\n        { value: \"N/A\", label: \"N/A\" },\r\n    ];\r\n\r\n    // ðŸ”’ Super-admin gate\r\n    useEffect(() => {\r\n        if (authLoading) return;\r\n        if (!user) {\r\n            navigate(\"/login\", { replace: true });\r\n            return;\r\n        }\r\n        if (user.email !== \"dev@brightbots.in\") {\r\n            navigate(\"/dashboard\", { replace: true });\r\n            return;\r\n        }\r\n        setUserRole(\"super_admin\");\r\n    }, [user, authLoading, navigate]);\r\n\r\n    // âœ… Fetch all clients\r\n    useEffect(() => {\r\n        const fetchClients = async () => {\r\n            try {\r\n                const snapshot = await getDocs(collection(db, \"clients\"));\r\n                setClients(snapshot.docs.map((docSnap) => ({ id: docSnap.id, ...docSnap.data() })));\r\n            } catch (err) {\r\n                console.error(\"Error fetching clients:\", err);\r\n            }\r\n        };\r\n        fetchClients();\r\n    }, []);\r\n\r\n    // âœ… Fetch all RBTs for selected client\r\n    useEffect(() => {\r\n        if (!selectedClient) return;\r\n\r\n        let interval;\r\n        const fetchAllRBTs = async () => {\r\n            try {\r\n                setLoading(true);\r\n                const sitesSnapshot = await getDocs(collection(db, \"clients\", selectedClient, \"sites\"));\r\n                let allRbts = [];\r\n\r\n                for (const siteDoc of sitesSnapshot.docs) {\r\n                    const siteName = siteDoc.id;\r\n                    const rbtsSnapshot = await getDocs(\r\n                        collection(db, \"clients\", selectedClient, \"sites\", siteName, \"rbts\")\r\n                    );\r\n\r\n                    const siteRbts = rbtsSnapshot.docs.map((docItem) => {\r\n                        const rbt = docItem.data() || {};\r\n                        const lastUpdated = rbt?.last_updated?.toDate?.() || null;\r\n                        return {\r\n                            id: docItem.id,\r\n                            rbt_id: docItem.id,\r\n                            site: siteName,\r\n                            ...rbt,\r\n                            running_status: rbt.running_status || \"N/A\",\r\n                            breakdown_status: rbt.breakdown_status || \"N/A\",\r\n                            work: rbt.work || \"N/A\",\r\n                            last_updated: lastUpdated,\r\n                            running_status_ageing:\r\n                                rbt.running_status === \"Auto\"\r\n                                    ? 0\r\n                                    : lastUpdated\r\n                                        ? Math.max(differenceInDays(new Date(), lastUpdated), 0)\r\n                                        : \"-\",\r\n                        };\r\n                    });\r\n\r\n                    allRbts = [...allRbts, ...siteRbts];\r\n                }\r\n\r\n                setRbts(allRbts);\r\n                setFiltered(allRbts);\r\n            } catch (error) {\r\n                console.error(\"Error fetching RBTs:\", error);\r\n            } finally {\r\n                setLoading(false);\r\n            }\r\n        };\r\n\r\n        fetchAllRBTs();\r\n        interval = setInterval(fetchAllRBTs, 30000);\r\n\r\n        return () => clearInterval(interval);\r\n    }, [selectedClient]);\r\n\r\n    // âœ… Apply filters\r\n    useEffect(() => {\r\n        let result = [...rbts];\r\n\r\n        if (filters.site) result = result.filter((rbt) => rbt.site === filters.site);\r\n        if (filters.running_status)\r\n            result = result.filter((rbt) => rbt.running_status === filters.running_status);\r\n        if (filters.breakdown_status)\r\n            result = result.filter((rbt) => rbt.breakdown_status === filters.breakdown_status);\r\n        if (filters.work) result = result.filter((rbt) => rbt.work === filters.work);\r\n\r\n        if (filters.from) {\r\n            const fromDate = new Date(filters.from);\r\n            if (!isNaN(fromDate))\r\n                result = result.filter((rbt) => rbt.last_updated && rbt.last_updated >= fromDate);\r\n        }\r\n\r\n        if (filters.to) {\r\n            const toDate = new Date(filters.to);\r\n            if (!isNaN(toDate))\r\n                result = result.filter((rbt) => rbt.last_updated && rbt.last_updated <= toDate);\r\n        }\r\n\r\n        setFiltered(result);\r\n    }, [filters, rbts]);\r\n\r\n    const handleFilterChange = (e) =>\r\n        setFilters((prev) => ({ ...prev, [e.target.name]: e.target.value }));\r\n\r\n    const handleExportCSV = () => {\r\n        const headers = [\r\n            \"Site\",\r\n            \"RBT\",\r\n            \"Running Status\",\r\n            \"Breakdown Status\",\r\n            \"Work\",\r\n            \"Ageing\",\r\n            \"Last Updated\",\r\n        ];\r\n        const rows = filtered.map((rbt) => [\r\n            rbt.site,\r\n            rbt.rbt_id,\r\n            rbt.running_status,\r\n            rbt.breakdown_status,\r\n            rbt.work,\r\n            rbt.running_status_ageing,\r\n            rbt.last_updated ? format(rbt.last_updated, \"yyyy-MM-dd HH:mm\") : \"-\",\r\n        ]);\r\n\r\n        const escapeCSV = (val) => `\"${String(val || \"\").replace(/\"/g, '\"\"')}\"`;\r\n        const csvContent = [headers, ...rows]\r\n            .map((row) => row.map(escapeCSV).join(\",\"))\r\n            .join(\"\\n\");\r\n        const blob = new Blob([csvContent], { type: \"text/csv;charset=utf-8;\" });\r\n        const url = URL.createObjectURL(blob);\r\n\r\n        const link = document.createElement(\"a\");\r\n        link.href = url;\r\n        link.setAttribute(\"download\", `RBT_Dashboard_${Date.now()}.csv`);\r\n        document.body.appendChild(link);\r\n        link.click();\r\n        document.body.removeChild(link);\r\n    };\r\n\r\n    const handleEditField = async (rbtId, site, field, value) => {\r\n        try {\r\n            const ref = doc(db, \"clients\", selectedClient, \"sites\", site, \"rbts\", rbtId);\r\n            const now = new Date();\r\n\r\n            const updateData = { [field]: String(value), last_updated: serverTimestamp() };\r\n\r\n            if (field === \"running_status\") {\r\n                updateData.running_status_ageing = value === \"Auto\" ? 0 : 0;\r\n            }\r\n\r\n            await updateDoc(ref, updateData);\r\n\r\n            setRbts((prev) =>\r\n                prev.map((r) =>\r\n                    r.id === rbtId\r\n                        ? {\r\n                            ...r,\r\n                            ...updateData,\r\n                            last_updated: now,\r\n                            running_status_ageing:\r\n                                field === \"running_status\" ? (value === \"Auto\" ? 0 : 0) : r.running_status_ageing,\r\n                        }\r\n                        : r\r\n                )\r\n            );\r\n        } catch (error) {\r\n            console.error(\"Error updating field:\", error);\r\n        }\r\n    };\r\n\r\n    const totalRBTs = filtered.length;\r\n    const autoCount = filtered.filter((r) => r.running_status === \"Auto\").length;\r\n    const manualCount = filtered.filter((r) => r.running_status === \"Manual\").length;\r\n    const notRunningCount = filtered.filter((r) => r.running_status === \"Not Running\").length;\r\n\r\n    return (\r\n        <div className=\"p-6\">\r\n            <h1 className=\"text-2xl font-bold mb-6\">ðŸ“Š Overall RBT Dashboard</h1>\r\n\r\n            {/* CLIENT SELECTOR */}\r\n            <div className=\"mb-4\">\r\n                <select\r\n                    value={selectedClient}\r\n                    onChange={(e) => setSelectedClient(e.target.value)}\r\n                    className=\"border p-2 rounded-md\"\r\n                >\r\n                    <option value=\"\">Select Client</option>\r\n                    {clients.map((client) => (\r\n                        <option key={client.id} value={client.id}>\r\n                            {client.id}\r\n                        </option>\r\n                    ))}\r\n                </select>\r\n            </div>\r\n\r\n            {/* SUMMARY */}\r\n            <div className=\"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6\">\r\n                <div className=\"bg-blue-100 p-4 rounded shadow text-center\">\r\n                    <h2 className=\"text-lg font-semibold\">Total RBTs</h2>\r\n                    <p className=\"text-2xl font-bold\">{totalRBTs}</p>\r\n                </div>\r\n                <div className=\"bg-green-100 p-4 rounded shadow text-center\">\r\n                    <h2 className=\"text-lg font-semibold\">Auto</h2>\r\n                    <p className=\"text-2xl font-bold\">{autoCount}</p>\r\n                </div>\r\n                <div className=\"bg-yellow-100 p-4 rounded shadow text-center\">\r\n                    <h2 className=\"text-lg font-semibold\">Manual</h2>\r\n                    <p className=\"text-2xl font-bold\">{manualCount}</p>\r\n                </div>\r\n                <div className=\"bg-red-100 p-4 rounded shadow text-center\">\r\n                    <h2 className=\"text-lg font-semibold\">Not Running</h2>\r\n                    <p className=\"text-2xl font-bold\">{notRunningCount}</p>\r\n                </div>\r\n            </div>\r\n\r\n            {/* FILTERS */}\r\n            <div className=\"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6\">\r\n                <select\r\n                    name=\"site\"\r\n                    value={filters.site}\r\n                    onChange={handleFilterChange}\r\n                    className=\"border p-2 rounded-md\"\r\n                >\r\n                    <option value=\"\">Filter by Site</option>\r\n                    {Array.from(new Set(rbts.map((rbt) => rbt.site)))\r\n                        .filter((v) => v)\r\n                        .map((val) => (\r\n                            <option key={val} value={val}>\r\n                                {val}\r\n                            </option>\r\n                        ))}\r\n                </select>\r\n\r\n                <select\r\n                    name=\"running_status\"\r\n                    value={filters.running_status}\r\n                    onChange={handleFilterChange}\r\n                    className=\"border p-2 rounded-md\"\r\n                >\r\n                    <option value=\"\">Filter by Running Status</option>\r\n                    {runningStatusOptions.map((opt) => (\r\n                        <option key={opt.value} value={opt.value}>\r\n                            {opt.label}\r\n                        </option>\r\n                    ))}\r\n                </select>\r\n\r\n                <select\r\n                    name=\"breakdown_status\"\r\n                    value={filters.breakdown_status}\r\n                    onChange={handleFilterChange}\r\n                    className=\"border p-2 rounded-md\"\r\n                >\r\n                    <option value=\"\">Filter by Breakdown Status</option>\r\n                    {breakdownStatusOptions.map((opt) => (\r\n                        <option key={opt.value} value={opt.value}>\r\n                            {opt.label}\r\n                        </option>\r\n                    ))}\r\n                </select>\r\n\r\n                <select\r\n                    name=\"work\"\r\n                    value={filters.work}\r\n                    onChange={handleFilterChange}\r\n                    className=\"border p-2 rounded-md\"\r\n                >\r\n                    <option value=\"\">Filter by Work</option>\r\n                    {workOptions.map((opt) => (\r\n                        <option key={opt.value} value={opt.value}>\r\n                            {opt.label}\r\n                        </option>\r\n                    ))}\r\n                </select>\r\n\r\n                <input\r\n                    type=\"date\"\r\n                    name=\"from\"\r\n                    value={filters.from}\r\n                    onChange={handleFilterChange}\r\n                    className=\"border p-2 rounded-md\"\r\n                />\r\n                <input\r\n                    type=\"date\"\r\n                    name=\"to\"\r\n                    value={filters.to}\r\n                    onChange={handleFilterChange}\r\n                    className=\"border p-2 rounded-md\"\r\n                />\r\n            </div>\r\n\r\n            {/* EXPORT */}\r\n            <div className=\"mb-4\">\r\n                <button\r\n                    onClick={handleExportCSV}\r\n                    className=\"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600\"\r\n                >\r\n                    Export CSV\r\n                </button>\r\n            </div>\r\n\r\n            {/* TABLE */}\r\n            {loading ? (\r\n                <p>Loading RBT data...</p>\r\n            ) : (\r\n                <div className=\"overflow-x-auto\">\r\n                    <table className=\"min-w-full bg-white shadow-md rounded-lg\">\r\n                        <thead>\r\n                            <tr className=\"bg-gray-200 text-gray-600 uppercase text-sm\">\r\n                                <th className=\"py-3 px-4 text-left\">Site</th>\r\n                                <th className=\"py-3 px-4 text-left\">RBT</th>\r\n                                <th className=\"py-3 px-4 text-left\">Running</th>\r\n                                <th className=\"py-3 px-4 text-left\">Breakdown</th>\r\n                                <th className=\"py-3 px-4 text-left\">Work</th>\r\n                                <th className=\"py-3 px-4 text-left\">Ageing</th>\r\n                                <th className=\"py-3 px-4 text-left\">Last Updated</th>\r\n                            </tr>\r\n                        </thead>\r\n                        <tbody className=\"text-gray-700 text-sm\">\r\n                            {filtered.map((rbt) => (\r\n                                <tr key={rbt.id} className=\"border-b border-gray-200 hover:bg-gray-100\">\r\n                                    <td className=\"py-2 px-4\">{rbt.site}</td>\r\n                                    <td className=\"py-2 px-4\">{rbt.rbt_id}</td>\r\n                                    {[\"running_status\", \"breakdown_status\", \"work\"].map((field) => (\r\n                                        <td key={field} className=\"py-2 px-4\">\r\n                                            {userRole === \"admin\" || userRole === \"super_admin\" ? (\r\n                                                <select\r\n                                                    value={rbt[field] || \"N/A\"}\r\n                                                    onChange={(e) =>\r\n                                                        handleEditField(rbt.id, rbt.site, field, e.target.value)\r\n                                                    }\r\n                                                    className=\"border p-1 rounded\"\r\n                                                >\r\n                                                    {field === \"running_status\" &&\r\n                                                        runningStatusOptions.map((opt) => (\r\n                                                            <option key={opt.value} value={opt.value}>\r\n                                                                {opt.label}\r\n                                                            </option>\r\n                                                        ))}\r\n                                                    {field === \"breakdown_status\" &&\r\n                                                        breakdownStatusOptions.map((opt) => (\r\n                                                            <option key={opt.value} value={opt.value}>\r\n                                                                {opt.label}\r\n                                                            </option>\r\n                                                        ))}\r\n                                                    {field === \"work\" &&\r\n                                                        workOptions.map((opt) => (\r\n                                                            <option key={opt.value} value={opt.value}>\r\n                                                                {opt.label}\r\n                                                            </option>\r\n                                                        ))}\r\n                                                </select>\r\n                                            ) : (\r\n                                                rbt[field] || \"N/A\"\r\n                                            )}\r\n                                        </td>\r\n                                    ))}\r\n                                    <td className=\"py-2 px-4 text-center\">{rbt.running_status_ageing}</td>\r\n                                    <td className=\"py-2 px-4\">\r\n                                        {rbt.last_updated ? format(rbt.last_updated, \"yyyy-MM-dd HH:mm\") : \"-\"}\r\n                                    </td>\r\n                                </tr>\r\n                            ))}\r\n                        </tbody>\r\n                    </table>\r\n                </div>\r\n            )}\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default OverallDashboard;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}