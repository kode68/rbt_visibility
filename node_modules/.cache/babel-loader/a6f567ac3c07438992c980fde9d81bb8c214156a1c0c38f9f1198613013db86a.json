{"ast":null,"code":"import React,{useState,useEffect}from\"react\";import{collection,onSnapshot,query,orderBy,doc,deleteDoc,updateDoc,serverTimestamp}from\"firebase/firestore\";import{db,auth}from\"../firebase\";import toast from\"react-hot-toast\";import{useNavigate}from\"react-router-dom\";import{saveAs}from\"file-saver\";import{format}from\"date-fns\";import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";function Logs(){const[logs,setLogs]=useState([]);const[filteredLogs,setFilteredLogs]=useState([]);const[editingId,setEditingId]=useState(null);const[editedLog,setEditedLog]=useState({old_value:\"\",new_value:\"\"});const[currentUser,setCurrentUser]=useState(null);const[startDate,setStartDate]=useState(\"\");const[endDate,setEndDate]=useState(\"\");const[jsonModal,setJsonModal]=useState({open:false,title:\"\",payload:\"\"});const navigate=useNavigate();const isSuperAdmin=(currentUser===null||currentUser===void 0?void 0:currentUser.email)===\"dev@brightbots.in\";useEffect(()=>{const unsub=auth.onAuthStateChanged(user=>{if(!user||!user.emailVerified){window.location.href=\"/login\";}else{setCurrentUser(user);}});return unsub;},[]);useEffect(()=>{const q=query(collection(db,\"rbt_logs\"),orderBy(\"timestamp\",\"desc\"));const unsub=onSnapshot(q,snap=>setLogs(snap.docs.map(d=>({id:d.id,...d.data()}))),err=>{console.error(\"Error fetching logs:\",err);toast.error(\"Failed to fetch logs\");});return unsub;},[]);const getLogDate=log=>{var _log$timestamp,_log$timestamp$toDate,_log$updated_at,_log$updated_at$toDat;return((_log$timestamp=log.timestamp)===null||_log$timestamp===void 0?void 0:(_log$timestamp$toDate=_log$timestamp.toDate)===null||_log$timestamp$toDate===void 0?void 0:_log$timestamp$toDate.call(_log$timestamp))||((_log$updated_at=log.updated_at)===null||_log$updated_at===void 0?void 0:(_log$updated_at$toDat=_log$updated_at.toDate)===null||_log$updated_at$toDat===void 0?void 0:_log$updated_at$toDat.call(_log$updated_at))||null;};useEffect(()=>{const filtered=logs.filter(log=>{const logDate=getLogDate(log);if(!logDate)return false;const start=startDate?new Date(`${startDate}T00:00:00`):null;const end=endDate?new Date(`${endDate}T23:59:59`):null;return(!start||logDate>=start)&&(!end||logDate<=end);});setFilteredLogs(filtered);},[logs,startDate,endDate]);// ---------- Helpers ----------\nconst parseJSON=val=>{if(val==null)return null;if(typeof val===\"object\")return val;if(typeof val===\"string\"){try{return JSON.parse(val);}catch{return null;}}return null;};const pretty=v=>{const obj=parseJSON(v);return obj?JSON.stringify(obj,null,2):String(v!==null&&v!==void 0?v:\"—\");};// Is this a part_issues-shaped object? (values are objects with dispatch/delivery keys)\nconst isPartIssues=obj=>obj&&typeof obj===\"object\"&&Object.values(obj).some(v=>v&&typeof v===\"object\"&&(\"dispatch_date\"in v||\"delivery_date\"in v));// Keep only parts that actually have at least one date\nconst filterRelevantParts=obj=>{if(!isPartIssues(obj))return obj;const out={};for(const[part,meta]of Object.entries(obj)){const dd=((meta===null||meta===void 0?void 0:meta.dispatch_date)||\"\").trim();const del=((meta===null||meta===void 0?void 0:meta.delivery_date)||\"\").trim();if(dd||del)out[part]={dispatch_date:dd||null,delivery_date:del||null};}return out;};// Changed keys (shallow) — for part_issues we compare only relevant (filtered) parts\nconst changedKeys=(oldVal,newVal,isPartField)=>{const oldObj0=parseJSON(oldVal);const newObj0=parseJSON(newVal);if(!oldObj0||!newObj0)return null;const oldObj=isPartField?filterRelevantParts(oldObj0):oldObj0;const newObj=isPartField?filterRelevantParts(newObj0):newObj0;const keys=Array.from(new Set([...Object.keys(oldObj),...Object.keys(newObj)]));const diffs=keys.filter(k=>{var _oldObj$k,_newObj$k;return String((_oldObj$k=oldObj[k])!==null&&_oldObj$k!==void 0?_oldObj$k:\"\")!==String((_newObj$k=newObj[k])!==null&&_newObj$k!==void 0?_newObj$k:\"\");});return diffs;};// Compact renderer\nconst renderCompact=function(value,field){let keysFilter=arguments.length>2&&arguments[2]!==undefined?arguments[2]:null;const obj0=parseJSON(value);// Special display for part_issues: show chips only for parts with dates\nif(isPartIssues(obj0)){const obj=filterRelevantParts(obj0);const entries=Object.entries(obj);if(entries.length===0)return/*#__PURE__*/_jsx(\"span\",{className:\"text-gray-400\",children:\"\\u2014\"});const MAX=6;const shown=entries.slice(0,MAX);const hiddenCount=entries.length-shown.length;return/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-wrap gap-1\",children:[shown.map(_ref=>{let[part,meta]=_ref;const bits=[];if(meta.dispatch_date)bits.push(`dispatch=${meta.dispatch_date}`);if(meta.delivery_date)bits.push(`delivery=${meta.delivery_date}`);return/*#__PURE__*/_jsxs(\"span\",{className:\"inline-block bg-gray-100 border border-gray-200 px-2 py-0.5 rounded text-xs\",title:`${part}: ${bits.join(\" • \")}`,children:[/*#__PURE__*/_jsx(\"b\",{children:part}),\": \",bits.join(\" • \")]},part);}),hiddenCount>0&&/*#__PURE__*/_jsxs(\"button\",{className:\"text-xs text-blue-600 underline\",onClick:()=>setJsonModal({open:true,title:`${field} (full)`,payload:JSON.stringify(filterRelevantParts(obj0),null,2)}),children:[\"+\",hiddenCount,\" more\"]})]});}// Generic JSON object case (non-parts)\nif(obj0&&typeof obj0===\"object\"){const entries=Object.entries(obj0).filter(_ref2=>{let[k]=_ref2;return!keysFilter||keysFilter.includes(k);});if(entries.length===0)return/*#__PURE__*/_jsx(\"span\",{className:\"text-gray-400\",children:\"\\u2014\"});const MAX=6;const shown=entries.slice(0,MAX);const hiddenCount=entries.length-shown.length;return/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-wrap gap-1\",children:[shown.map(_ref3=>{let[k,v]=_ref3;return/*#__PURE__*/_jsxs(\"span\",{className:\"inline-block bg-gray-100 border border-gray-200 px-2 py-0.5 rounded text-xs\",title:`${k}: ${String(v!==null&&v!==void 0?v:\"-\")}`,children:[/*#__PURE__*/_jsx(\"b\",{children:k}),\": \",String(v!==null&&v!==void 0?v:\"-\")]},k);}),hiddenCount>0&&/*#__PURE__*/_jsxs(\"button\",{className:\"text-xs text-blue-600 underline\",onClick:()=>setJsonModal({open:true,title:`${field} (full)`,payload:JSON.stringify(obj0,null,2)}),children:[\"+\",hiddenCount,\" more\"]})]});}// Primitive string/number\nconst s=value==null||value===\"\"?\"—\":String(value);const isLong=s.length>60;return/*#__PURE__*/_jsx(\"div\",{className:\"truncate max-w-[360px]\",title:s,children:isLong?`${s.slice(0,60)}…`:s});};// ---------- Actions ----------\nconst handleDelete=async id=>{if(!window.confirm(\"Delete this log entry?\"))return;try{await deleteDoc(doc(db,\"rbt_logs\",id));toast.success(\"Log deleted\");setLogs(prev=>prev.filter(l=>l.id!==id));}catch(err){console.error(\"Error deleting log:\",err);toast.error(\"Failed to delete log\");}};const handleEdit=log=>{var _log$old_value,_log$new_value;setEditingId(log.id);setEditedLog({old_value:typeof log.old_value===\"string\"?log.old_value:JSON.stringify((_log$old_value=log.old_value)!==null&&_log$old_value!==void 0?_log$old_value:\"-\"),new_value:typeof log.new_value===\"string\"?log.new_value:JSON.stringify((_log$new_value=log.new_value)!==null&&_log$new_value!==void 0?_log$new_value:\"-\")});};const handleSave=async()=>{try{var _editedLog$old_value,_editedLog$new_value;await updateDoc(doc(db,\"rbt_logs\",editingId),{old_value:(_editedLog$old_value=editedLog.old_value)!==null&&_editedLog$old_value!==void 0?_editedLog$old_value:\"-\",new_value:(_editedLog$new_value=editedLog.new_value)!==null&&_editedLog$new_value!==void 0?_editedLog$new_value:\"-\",edited_at:serverTimestamp(),edited_by:(currentUser===null||currentUser===void 0?void 0:currentUser.email)||\"unknown\"});toast.success(\"Log updated\");setEditingId(null);}catch(err){console.error(\"Error updating log:\",err);toast.error(\"Failed to update log\");}};const handleChange=(field,value)=>setEditedLog(p=>({...p,[field]:value}));// ---------- CSV (with filtered part_issues) ----------\nconst csvEscape=val=>{const s=String(val!==null&&val!==void 0?val:\"\");return /[\",\\n]/.test(s)?`\"${s.replace(/\"/g,'\"\"')}\"`:s;};const compactForCsv=(field,oldVal,newVal)=>{const isParts=String(field||\"\").startsWith(\"part_issues\");const oldObj0=parseJSON(oldVal);const newObj0=parseJSON(newVal);if(isParts&&(oldObj0||newObj0)){const oldObj=filterRelevantParts(oldObj0||{});const newObj=filterRelevantParts(newObj0||{});const toStr=obj=>Object.entries(obj).map(_ref4=>{let[part,m]=_ref4;const bits=[];if(m.dispatch_date)bits.push(`dispatch=${m.dispatch_date}`);if(m.delivery_date)bits.push(`delivery=${m.delivery_date}`);return`${part}: ${bits.join(\" • \")}`;}).join(\"; \");return{oldStr:toStr(oldObj)||\"-\",newStr:toStr(newObj)||\"-\"};}// non-parts\nreturn{oldStr:typeof oldVal===\"string\"?oldVal:JSON.stringify(oldVal!==null&&oldVal!==void 0?oldVal:\"-\"),newStr:typeof newVal===\"string\"?newVal:JSON.stringify(newVal!==null&&newVal!==void 0?newVal:\"-\")};};const handleExport=()=>{const header=[\"Client\",\"Site\",\"RBT ID\",\"Field\",\"Old Value\",\"New Value\",\"Updated By\",\"Time\"];const rows=filteredLogs.map(log=>{const ts=getLogDate(log);const{oldStr,newStr}=compactForCsv(log.field,log.old_value,log.new_value);return[log.client||\"-\",log.site||\"-\",log.rbt_id||\"-\",log.field||\"-\",oldStr,newStr,log.updated_by||\"-\",ts?format(ts,\"dd-MM-yyyy HH:mm:ss\"):\"-\"];});const csv=[header,...rows].map(r=>r.map(csvEscape).join(\",\")).join(\"\\n\");const blob=new Blob([csv],{type:\"text/csv;charset=utf-8;\"});saveAs(blob,`rbt_logs_export_${Date.now()}.csv`);};// ---------- UI ----------\nreturn/*#__PURE__*/_jsxs(\"div\",{className:\"min-h-screen bg-gray-100 p-6 font-sans\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between mb-6\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-3xl font-bold text-blue-700\",children:\"\\uD83D\\uDD0D Log Viewer\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-x-2 flex items-center\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>navigate(\"/dashboard\"),className:\"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700\",children:\"\\u2B05 Back to Dashboard\"}),/*#__PURE__*/_jsx(\"input\",{type:\"date\",value:startDate,onChange:e=>setStartDate(e.target.value),className:\"border px-2 py-1 rounded\"}),/*#__PURE__*/_jsx(\"span\",{children:\"to\"}),/*#__PURE__*/_jsx(\"input\",{type:\"date\",value:endDate,onChange:e=>setEndDate(e.target.value),className:\"border px-2 py-1 rounded\"}),/*#__PURE__*/_jsx(\"button\",{onClick:handleExport,className:\"bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700\",children:\"\\uD83D\\uDCE5 Download CSV\"})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"overflow-auto bg-white shadow-md rounded-xl\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"min-w-full table-fixed text-sm text-left border\",children:[/*#__PURE__*/_jsxs(\"colgroup\",{children:[/*#__PURE__*/_jsx(\"col\",{className:\"w-[110px]\"}),/*#__PURE__*/_jsx(\"col\",{className:\"w-[110px]\"}),/*#__PURE__*/_jsx(\"col\",{className:\"w-[90px]\"}),/*#__PURE__*/_jsx(\"col\",{className:\"w-[230px]\"}),/*#__PURE__*/_jsx(\"col\",{className:\"w-[360px]\"}),/*#__PURE__*/_jsx(\"col\",{className:\"w-[360px]\"}),/*#__PURE__*/_jsx(\"col\",{className:\"w-[160px]\"}),/*#__PURE__*/_jsx(\"col\",{className:\"w-[160px]\"}),/*#__PURE__*/_jsx(\"col\",{className:\"w-[140px]\"})]}),/*#__PURE__*/_jsx(\"thead\",{className:\"bg-blue-100 text-blue-800 font-semibold\",children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{className:\"px-3 py-2 border\",children:\"Client\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-3 py-2 border\",children:\"Site\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-3 py-2 border\",children:\"RBT\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-3 py-2 border\",children:\"Field\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-3 py-2 border\",children:\"Old\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-3 py-2 border\",children:\"New\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-3 py-2 border\",children:\"Updated By\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-3 py-2 border\",children:\"Time\"}),isSuperAdmin&&/*#__PURE__*/_jsx(\"th\",{className:\"px-3 py-2 border\",children:\"Actions\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:filteredLogs.map(log=>{const ts=getLogDate(log);const isPartsField=String(log.field||\"\").startsWith(\"part_issues\");const diffs=!isPartsField?changedKeys(log.old_value,log.new_value,false):null;return/*#__PURE__*/_jsxs(\"tr\",{className:\"border-t align-top hover:bg-gray-50\",children:[/*#__PURE__*/_jsx(\"td\",{className:\"px-3 py-2 border\",children:log.client||\"-\"}),/*#__PURE__*/_jsx(\"td\",{className:\"px-3 py-2 border\",children:log.site||\"-\"}),/*#__PURE__*/_jsx(\"td\",{className:\"px-3 py-2 border\",children:log.rbt_id||\"-\"}),/*#__PURE__*/_jsx(\"td\",{className:\"px-3 py-2 border break-words\",children:log.field||\"-\"}),/*#__PURE__*/_jsx(\"td\",{className:\"px-3 py-2 border\",children:renderCompact(log.old_value,log.field,diffs||undefined)}),/*#__PURE__*/_jsx(\"td\",{className:\"px-3 py-2 border\",children:renderCompact(log.new_value,log.field,diffs||undefined)}),/*#__PURE__*/_jsx(\"td\",{className:\"px-3 py-2 border\",children:log.updated_by||\"-\"}),/*#__PURE__*/_jsx(\"td\",{className:\"px-3 py-2 border\",children:ts?format(ts,\"dd-MM-yyyy HH:mm:ss\"):\"-\"}),isSuperAdmin&&/*#__PURE__*/_jsxs(\"td\",{className:\"px-3 py-2 border space-x-1\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>{var _parseJSON,_parseJSON2;return setJsonModal({open:true,title:\"Full entry\",payload:pretty({old:isPartIssues(parseJSON(log.old_value))?filterRelevantParts(parseJSON(log.old_value)):(_parseJSON=parseJSON(log.old_value))!==null&&_parseJSON!==void 0?_parseJSON:log.old_value,new:isPartIssues(parseJSON(log.new_value))?filterRelevantParts(parseJSON(log.new_value)):(_parseJSON2=parseJSON(log.new_value))!==null&&_parseJSON2!==void 0?_parseJSON2:log.new_value})});},className:\"bg-slate-200 text-gray-800 px-3 py-1 rounded hover:bg-slate-300\",children:\"View\"}),editingId===log.id?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"button\",{onClick:handleSave,className:\"bg-green-500 text-white px-3 py-1 rounded hover:bg-green-600\",children:\"Save\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setEditingId(null),className:\"bg-gray-400 text-white px-3 py-1 rounded hover:bg-gray-500\",children:\"Cancel\"})]}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleEdit(log),className:\"bg-yellow-500 text-white px-3 py-1 rounded hover:bg-yellow-600\",children:\"Edit\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleDelete(log.id),className:\"bg-red-500 text-white px-3 py-1 rounded hover:bg-red-600\",children:\"Delete\"})]})]})]},log.id);})})]})}),jsonModal.open&&/*#__PURE__*/_jsx(\"div\",{className:\"fixed inset-0 bg-black/40 flex items-center justify-center z-50\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg shadow-lg w-[720px] max-w-[95vw] max-h-[85vh] overflow-hidden\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"px-4 py-3 border-b flex items-center justify-between\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"font-semibold\",children:jsonModal.title}),/*#__PURE__*/_jsx(\"button\",{className:\"text-gray-500 hover:text-gray-700\",onClick:()=>setJsonModal({open:false,title:\"\",payload:\"\"}),children:\"\\u2715\"})]}),/*#__PURE__*/_jsx(\"pre\",{className:\"p-4 text-sm overflow-auto whitespace-pre-wrap break-all\",children:typeof jsonModal.payload===\"string\"?jsonModal.payload:JSON.stringify(jsonModal.payload,null,2)})]})})]});}export default Logs;","map":{"version":3,"names":["React","useState","useEffect","collection","onSnapshot","query","orderBy","doc","deleteDoc","updateDoc","serverTimestamp","db","auth","toast","useNavigate","saveAs","format","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","Logs","logs","setLogs","filteredLogs","setFilteredLogs","editingId","setEditingId","editedLog","setEditedLog","old_value","new_value","currentUser","setCurrentUser","startDate","setStartDate","endDate","setEndDate","jsonModal","setJsonModal","open","title","payload","navigate","isSuperAdmin","email","unsub","onAuthStateChanged","user","emailVerified","window","location","href","q","snap","docs","map","d","id","data","err","console","error","getLogDate","log","_log$timestamp","_log$timestamp$toDate","_log$updated_at","_log$updated_at$toDat","timestamp","toDate","call","updated_at","filtered","filter","logDate","start","Date","end","parseJSON","val","JSON","parse","pretty","v","obj","stringify","String","isPartIssues","Object","values","some","filterRelevantParts","out","part","meta","entries","dd","dispatch_date","trim","del","delivery_date","changedKeys","oldVal","newVal","isPartField","oldObj0","newObj0","oldObj","newObj","keys","Array","from","Set","diffs","k","_oldObj$k","_newObj$k","renderCompact","value","field","keysFilter","arguments","length","undefined","obj0","className","children","MAX","shown","slice","hiddenCount","_ref","bits","push","join","onClick","_ref2","includes","_ref3","s","isLong","handleDelete","confirm","success","prev","l","handleEdit","_log$old_value","_log$new_value","handleSave","_editedLog$old_value","_editedLog$new_value","edited_at","edited_by","handleChange","p","csvEscape","test","replace","compactForCsv","isParts","startsWith","toStr","_ref4","m","oldStr","newStr","handleExport","header","rows","ts","client","site","rbt_id","updated_by","csv","r","blob","Blob","type","now","onChange","e","target","isPartsField","_parseJSON","_parseJSON2","old","new"],"sources":["C:/Users/mis/rbt-dashboard/src/pages/Logs.jsx"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport {\r\n    collection,\r\n    onSnapshot,\r\n    query,\r\n    orderBy,\r\n    doc,\r\n    deleteDoc,\r\n    updateDoc,\r\n    serverTimestamp,\r\n} from \"firebase/firestore\";\r\nimport { db, auth } from \"../firebase\";\r\nimport toast from \"react-hot-toast\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport { saveAs } from \"file-saver\";\r\nimport { format } from \"date-fns\";\r\n\r\nfunction Logs() {\r\n    const [logs, setLogs] = useState([]);\r\n    const [filteredLogs, setFilteredLogs] = useState([]);\r\n    const [editingId, setEditingId] = useState(null);\r\n    const [editedLog, setEditedLog] = useState({ old_value: \"\", new_value: \"\" });\r\n    const [currentUser, setCurrentUser] = useState(null);\r\n    const [startDate, setStartDate] = useState(\"\");\r\n    const [endDate, setEndDate] = useState(\"\");\r\n    const [jsonModal, setJsonModal] = useState({ open: false, title: \"\", payload: \"\" });\r\n\r\n    const navigate = useNavigate();\r\n    const isSuperAdmin = currentUser?.email === \"dev@brightbots.in\";\r\n\r\n    useEffect(() => {\r\n        const unsub = auth.onAuthStateChanged((user) => {\r\n            if (!user || !user.emailVerified) {\r\n                window.location.href = \"/login\";\r\n            } else {\r\n                setCurrentUser(user);\r\n            }\r\n        });\r\n        return unsub;\r\n    }, []);\r\n\r\n    useEffect(() => {\r\n        const q = query(collection(db, \"rbt_logs\"), orderBy(\"timestamp\", \"desc\"));\r\n        const unsub = onSnapshot(\r\n            q,\r\n            (snap) => setLogs(snap.docs.map((d) => ({ id: d.id, ...d.data() }))),\r\n            (err) => {\r\n                console.error(\"Error fetching logs:\", err);\r\n                toast.error(\"Failed to fetch logs\");\r\n            }\r\n        );\r\n        return unsub;\r\n    }, []);\r\n\r\n    const getLogDate = (log) =>\r\n        log.timestamp?.toDate?.() || log.updated_at?.toDate?.() || null;\r\n\r\n    useEffect(() => {\r\n        const filtered = logs.filter((log) => {\r\n            const logDate = getLogDate(log);\r\n            if (!logDate) return false;\r\n            const start = startDate ? new Date(`${startDate}T00:00:00`) : null;\r\n            const end = endDate ? new Date(`${endDate}T23:59:59`) : null;\r\n            return (!start || logDate >= start) && (!end || logDate <= end);\r\n        });\r\n        setFilteredLogs(filtered);\r\n    }, [logs, startDate, endDate]);\r\n\r\n    // ---------- Helpers ----------\r\n\r\n    const parseJSON = (val) => {\r\n        if (val == null) return null;\r\n        if (typeof val === \"object\") return val;\r\n        if (typeof val === \"string\") {\r\n            try { return JSON.parse(val); } catch { return null; }\r\n        }\r\n        return null;\r\n    };\r\n\r\n    const pretty = (v) => {\r\n        const obj = parseJSON(v);\r\n        return obj ? JSON.stringify(obj, null, 2) : String(v ?? \"—\");\r\n    };\r\n\r\n    // Is this a part_issues-shaped object? (values are objects with dispatch/delivery keys)\r\n    const isPartIssues = (obj) =>\r\n        obj &&\r\n        typeof obj === \"object\" &&\r\n        Object.values(obj).some(\r\n            (v) => v && typeof v === \"object\" && (\"dispatch_date\" in v || \"delivery_date\" in v)\r\n        );\r\n\r\n    // Keep only parts that actually have at least one date\r\n    const filterRelevantParts = (obj) => {\r\n        if (!isPartIssues(obj)) return obj;\r\n        const out = {};\r\n        for (const [part, meta] of Object.entries(obj)) {\r\n            const dd = (meta?.dispatch_date || \"\").trim();\r\n            const del = (meta?.delivery_date || \"\").trim();\r\n            if (dd || del) out[part] = { dispatch_date: dd || null, delivery_date: del || null };\r\n        }\r\n        return out;\r\n    };\r\n\r\n    // Changed keys (shallow) — for part_issues we compare only relevant (filtered) parts\r\n    const changedKeys = (oldVal, newVal, isPartField) => {\r\n        const oldObj0 = parseJSON(oldVal);\r\n        const newObj0 = parseJSON(newVal);\r\n        if (!oldObj0 || !newObj0) return null;\r\n\r\n        const oldObj = isPartField ? filterRelevantParts(oldObj0) : oldObj0;\r\n        const newObj = isPartField ? filterRelevantParts(newObj0) : newObj0;\r\n\r\n        const keys = Array.from(new Set([...Object.keys(oldObj), ...Object.keys(newObj)]));\r\n        const diffs = keys.filter((k) => String(oldObj[k] ?? \"\") !== String(newObj[k] ?? \"\"));\r\n        return diffs;\r\n    };\r\n\r\n    // Compact renderer\r\n    const renderCompact = (value, field, keysFilter = null) => {\r\n        const obj0 = parseJSON(value);\r\n\r\n        // Special display for part_issues: show chips only for parts with dates\r\n        if (isPartIssues(obj0)) {\r\n            const obj = filterRelevantParts(obj0);\r\n            const entries = Object.entries(obj);\r\n            if (entries.length === 0) return <span className=\"text-gray-400\">—</span>;\r\n\r\n            const MAX = 6;\r\n            const shown = entries.slice(0, MAX);\r\n            const hiddenCount = entries.length - shown.length;\r\n\r\n            return (\r\n                <div className=\"flex flex-wrap gap-1\">\r\n                    {shown.map(([part, meta]) => {\r\n                        const bits = [];\r\n                        if (meta.dispatch_date) bits.push(`dispatch=${meta.dispatch_date}`);\r\n                        if (meta.delivery_date) bits.push(`delivery=${meta.delivery_date}`);\r\n                        return (\r\n                            <span\r\n                                key={part}\r\n                                className=\"inline-block bg-gray-100 border border-gray-200 px-2 py-0.5 rounded text-xs\"\r\n                                title={`${part}: ${bits.join(\" • \")}`}\r\n                            >\r\n                                <b>{part}</b>: {bits.join(\" • \")}\r\n                            </span>\r\n                        );\r\n                    })}\r\n                    {hiddenCount > 0 && (\r\n                        <button\r\n                            className=\"text-xs text-blue-600 underline\"\r\n                            onClick={() =>\r\n                                setJsonModal({\r\n                                    open: true,\r\n                                    title: `${field} (full)`,\r\n                                    payload: JSON.stringify(filterRelevantParts(obj0), null, 2),\r\n                                })\r\n                            }\r\n                        >\r\n                            +{hiddenCount} more\r\n                        </button>\r\n                    )}\r\n                </div>\r\n            );\r\n        }\r\n\r\n        // Generic JSON object case (non-parts)\r\n        if (obj0 && typeof obj0 === \"object\") {\r\n            const entries = Object.entries(obj0).filter(\r\n                ([k]) => !keysFilter || keysFilter.includes(k)\r\n            );\r\n            if (entries.length === 0) return <span className=\"text-gray-400\">—</span>;\r\n            const MAX = 6;\r\n            const shown = entries.slice(0, MAX);\r\n            const hiddenCount = entries.length - shown.length;\r\n            return (\r\n                <div className=\"flex flex-wrap gap-1\">\r\n                    {shown.map(([k, v]) => (\r\n                        <span\r\n                            key={k}\r\n                            className=\"inline-block bg-gray-100 border border-gray-200 px-2 py-0.5 rounded text-xs\"\r\n                            title={`${k}: ${String(v ?? \"-\")}`}\r\n                        >\r\n                            <b>{k}</b>: {String(v ?? \"-\")}\r\n                        </span>\r\n                    ))}\r\n                    {hiddenCount > 0 && (\r\n                        <button\r\n                            className=\"text-xs text-blue-600 underline\"\r\n                            onClick={() =>\r\n                                setJsonModal({\r\n                                    open: true,\r\n                                    title: `${field} (full)`,\r\n                                    payload: JSON.stringify(obj0, null, 2),\r\n                                })\r\n                            }\r\n                        >\r\n                            +{hiddenCount} more\r\n                        </button>\r\n                    )}\r\n                </div>\r\n            );\r\n        }\r\n\r\n        // Primitive string/number\r\n        const s = value == null || value === \"\" ? \"—\" : String(value);\r\n        const isLong = s.length > 60;\r\n        return (\r\n            <div className=\"truncate max-w-[360px]\" title={s}>\r\n                {isLong ? `${s.slice(0, 60)}…` : s}\r\n            </div>\r\n        );\r\n    };\r\n\r\n    // ---------- Actions ----------\r\n\r\n    const handleDelete = async (id) => {\r\n        if (!window.confirm(\"Delete this log entry?\")) return;\r\n        try {\r\n            await deleteDoc(doc(db, \"rbt_logs\", id));\r\n            toast.success(\"Log deleted\");\r\n            setLogs((prev) => prev.filter((l) => l.id !== id));\r\n        } catch (err) {\r\n            console.error(\"Error deleting log:\", err);\r\n            toast.error(\"Failed to delete log\");\r\n        }\r\n    };\r\n\r\n    const handleEdit = (log) => {\r\n        setEditingId(log.id);\r\n        setEditedLog({\r\n            old_value: typeof log.old_value === \"string\" ? log.old_value : JSON.stringify(log.old_value ?? \"-\"),\r\n            new_value: typeof log.new_value === \"string\" ? log.new_value : JSON.stringify(log.new_value ?? \"-\"),\r\n        });\r\n    };\r\n\r\n    const handleSave = async () => {\r\n        try {\r\n            await updateDoc(doc(db, \"rbt_logs\", editingId), {\r\n                old_value: editedLog.old_value ?? \"-\",\r\n                new_value: editedLog.new_value ?? \"-\",\r\n                edited_at: serverTimestamp(),\r\n                edited_by: currentUser?.email || \"unknown\",\r\n            });\r\n            toast.success(\"Log updated\");\r\n            setEditingId(null);\r\n        } catch (err) {\r\n            console.error(\"Error updating log:\", err);\r\n            toast.error(\"Failed to update log\");\r\n        }\r\n    };\r\n\r\n    const handleChange = (field, value) =>\r\n        setEditedLog((p) => ({ ...p, [field]: value }));\r\n\r\n    // ---------- CSV (with filtered part_issues) ----------\r\n\r\n    const csvEscape = (val) => {\r\n        const s = String(val ?? \"\");\r\n        return /[\",\\n]/.test(s) ? `\"${s.replace(/\"/g, '\"\"')}\"` : s;\r\n    };\r\n\r\n    const compactForCsv = (field, oldVal, newVal) => {\r\n        const isParts = String(field || \"\").startsWith(\"part_issues\");\r\n        const oldObj0 = parseJSON(oldVal);\r\n        const newObj0 = parseJSON(newVal);\r\n\r\n        if (isParts && (oldObj0 || newObj0)) {\r\n            const oldObj = filterRelevantParts(oldObj0 || {});\r\n            const newObj = filterRelevantParts(newObj0 || {});\r\n            const toStr = (obj) =>\r\n                Object.entries(obj)\r\n                    .map(([part, m]) => {\r\n                        const bits = [];\r\n                        if (m.dispatch_date) bits.push(`dispatch=${m.dispatch_date}`);\r\n                        if (m.delivery_date) bits.push(`delivery=${m.delivery_date}`);\r\n                        return `${part}: ${bits.join(\" • \")}`;\r\n                    })\r\n                    .join(\"; \");\r\n            return { oldStr: toStr(oldObj) || \"-\", newStr: toStr(newObj) || \"-\" };\r\n        }\r\n\r\n        // non-parts\r\n        return {\r\n            oldStr: typeof oldVal === \"string\" ? oldVal : JSON.stringify(oldVal ?? \"-\"),\r\n            newStr: typeof newVal === \"string\" ? newVal : JSON.stringify(newVal ?? \"-\"),\r\n        };\r\n    };\r\n\r\n    const handleExport = () => {\r\n        const header = [\"Client\", \"Site\", \"RBT ID\", \"Field\", \"Old Value\", \"New Value\", \"Updated By\", \"Time\"];\r\n        const rows = filteredLogs.map((log) => {\r\n            const ts = getLogDate(log);\r\n            const { oldStr, newStr } = compactForCsv(log.field, log.old_value, log.new_value);\r\n            return [\r\n                log.client || \"-\",\r\n                log.site || \"-\",\r\n                log.rbt_id || \"-\",\r\n                log.field || \"-\",\r\n                oldStr,\r\n                newStr,\r\n                log.updated_by || \"-\",\r\n                ts ? format(ts, \"dd-MM-yyyy HH:mm:ss\") : \"-\",\r\n            ];\r\n        });\r\n        const csv = [header, ...rows].map((r) => r.map(csvEscape).join(\",\")).join(\"\\n\");\r\n        const blob = new Blob([csv], { type: \"text/csv;charset=utf-8;\" });\r\n        saveAs(blob, `rbt_logs_export_${Date.now()}.csv`);\r\n    };\r\n\r\n    // ---------- UI ----------\r\n\r\n    return (\r\n        <div className=\"min-h-screen bg-gray-100 p-6 font-sans\">\r\n            <div className=\"flex items-center justify-between mb-6\">\r\n                <h1 className=\"text-3xl font-bold text-blue-700\">🔍 Log Viewer</h1>\r\n                <div className=\"space-x-2 flex items-center\">\r\n                    <button\r\n                        onClick={() => navigate(\"/dashboard\")}\r\n                        className=\"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700\"\r\n                    >\r\n                        ⬅ Back to Dashboard\r\n                    </button>\r\n                    <input\r\n                        type=\"date\"\r\n                        value={startDate}\r\n                        onChange={(e) => setStartDate(e.target.value)}\r\n                        className=\"border px-2 py-1 rounded\"\r\n                    />\r\n                    <span>to</span>\r\n                    <input\r\n                        type=\"date\"\r\n                        value={endDate}\r\n                        onChange={(e) => setEndDate(e.target.value)}\r\n                        className=\"border px-2 py-1 rounded\"\r\n                    />\r\n                    <button\r\n                        onClick={handleExport}\r\n                        className=\"bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700\"\r\n                    >\r\n                        📥 Download CSV\r\n                    </button>\r\n                </div>\r\n            </div>\r\n\r\n            <div className=\"overflow-auto bg-white shadow-md rounded-xl\">\r\n                <table className=\"min-w-full table-fixed text-sm text-left border\">\r\n                    <colgroup>\r\n                        <col className=\"w-[110px]\" />\r\n                        <col className=\"w-[110px]\" />\r\n                        <col className=\"w-[90px]\" />\r\n                        <col className=\"w-[230px]\" />\r\n                        <col className=\"w-[360px]\" />\r\n                        <col className=\"w-[360px]\" />\r\n                        <col className=\"w-[160px]\" />\r\n                        <col className=\"w-[160px]\" />\r\n                        <col className=\"w-[140px]\" />\r\n                    </colgroup>\r\n                    <thead className=\"bg-blue-100 text-blue-800 font-semibold\">\r\n                        <tr>\r\n                            <th className=\"px-3 py-2 border\">Client</th>\r\n                            <th className=\"px-3 py-2 border\">Site</th>\r\n                            <th className=\"px-3 py-2 border\">RBT</th>\r\n                            <th className=\"px-3 py-2 border\">Field</th>\r\n                            <th className=\"px-3 py-2 border\">Old</th>\r\n                            <th className=\"px-3 py-2 border\">New</th>\r\n                            <th className=\"px-3 py-2 border\">Updated By</th>\r\n                            <th className=\"px-3 py-2 border\">Time</th>\r\n                            {isSuperAdmin && <th className=\"px-3 py-2 border\">Actions</th>}\r\n                        </tr>\r\n                    </thead>\r\n                    <tbody>\r\n                        {filteredLogs.map((log) => {\r\n                            const ts = getLogDate(log);\r\n                            const isPartsField = String(log.field || \"\").startsWith(\"part_issues\");\r\n                            const diffs = !isPartsField ? changedKeys(log.old_value, log.new_value, false) : null;\r\n\r\n                            return (\r\n                                <tr key={log.id} className=\"border-t align-top hover:bg-gray-50\">\r\n                                    <td className=\"px-3 py-2 border\">{log.client || \"-\"}</td>\r\n                                    <td className=\"px-3 py-2 border\">{log.site || \"-\"}</td>\r\n                                    <td className=\"px-3 py-2 border\">{log.rbt_id || \"-\"}</td>\r\n                                    <td className=\"px-3 py-2 border break-words\">{log.field || \"-\"}</td>\r\n                                    <td className=\"px-3 py-2 border\">\r\n                                        {renderCompact(log.old_value, log.field, diffs || undefined)}\r\n                                    </td>\r\n                                    <td className=\"px-3 py-2 border\">\r\n                                        {renderCompact(log.new_value, log.field, diffs || undefined)}\r\n                                    </td>\r\n                                    <td className=\"px-3 py-2 border\">{log.updated_by || \"-\"}</td>\r\n                                    <td className=\"px-3 py-2 border\">\r\n                                        {ts ? format(ts, \"dd-MM-yyyy HH:mm:ss\") : \"-\"}\r\n                                    </td>\r\n                                    {isSuperAdmin && (\r\n                                        <td className=\"px-3 py-2 border space-x-1\">\r\n                                            <button\r\n                                                onClick={() =>\r\n                                                    setJsonModal({\r\n                                                        open: true,\r\n                                                        title: \"Full entry\",\r\n                                                        payload: pretty({\r\n                                                            old: isPartIssues(parseJSON(log.old_value))\r\n                                                                ? filterRelevantParts(parseJSON(log.old_value))\r\n                                                                : parseJSON(log.old_value) ?? log.old_value,\r\n                                                            new: isPartIssues(parseJSON(log.new_value))\r\n                                                                ? filterRelevantParts(parseJSON(log.new_value))\r\n                                                                : parseJSON(log.new_value) ?? log.new_value,\r\n                                                        }),\r\n                                                    })\r\n                                                }\r\n                                                className=\"bg-slate-200 text-gray-800 px-3 py-1 rounded hover:bg-slate-300\"\r\n                                            >\r\n                                                View\r\n                                            </button>\r\n                                            {editingId === log.id ? (\r\n                                                <>\r\n                                                    <button\r\n                                                        onClick={handleSave}\r\n                                                        className=\"bg-green-500 text-white px-3 py-1 rounded hover:bg-green-600\"\r\n                                                    >\r\n                                                        Save\r\n                                                    </button>\r\n                                                    <button\r\n                                                        onClick={() => setEditingId(null)}\r\n                                                        className=\"bg-gray-400 text-white px-3 py-1 rounded hover:bg-gray-500\"\r\n                                                    >\r\n                                                        Cancel\r\n                                                    </button>\r\n                                                </>\r\n                                            ) : (\r\n                                                <>\r\n                                                    <button\r\n                                                        onClick={() => handleEdit(log)}\r\n                                                        className=\"bg-yellow-500 text-white px-3 py-1 rounded hover:bg-yellow-600\"\r\n                                                    >\r\n                                                        Edit\r\n                                                    </button>\r\n                                                    <button\r\n                                                        onClick={() => handleDelete(log.id)}\r\n                                                        className=\"bg-red-500 text-white px-3 py-1 rounded hover:bg-red-600\"\r\n                                                    >\r\n                                                        Delete\r\n                                                    </button>\r\n                                                </>\r\n                                            )}\r\n                                        </td>\r\n                                    )}\r\n                                </tr>\r\n                            );\r\n                        })}\r\n                    </tbody>\r\n                </table>\r\n            </div>\r\n\r\n            {jsonModal.open && (\r\n                <div className=\"fixed inset-0 bg-black/40 flex items-center justify-center z-50\">\r\n                    <div className=\"bg-white rounded-lg shadow-lg w-[720px] max-w-[95vw] max-h-[85vh] overflow-hidden\">\r\n                        <div className=\"px-4 py-3 border-b flex items-center justify-between\">\r\n                            <h3 className=\"font-semibold\">{jsonModal.title}</h3>\r\n                            <button\r\n                                className=\"text-gray-500 hover:text-gray-700\"\r\n                                onClick={() => setJsonModal({ open: false, title: \"\", payload: \"\" })}\r\n                            >\r\n                                ✕\r\n                            </button>\r\n                        </div>\r\n                        <pre className=\"p-4 text-sm overflow-auto whitespace-pre-wrap break-all\">\r\n                            {typeof jsonModal.payload === \"string\"\r\n                                ? jsonModal.payload\r\n                                : JSON.stringify(jsonModal.payload, null, 2)}\r\n                        </pre>\r\n                    </div>\r\n                </div>\r\n            )}\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default Logs;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}