{"ast":null,"code":"'use client';\n\nimport _extends from \"@babel/runtime/helpers/esm/extends\";\nimport * as React from 'react';\nimport useEventCallback from '@mui/utils/useEventCallback';\nimport ownerDocument from '@mui/utils/ownerDocument';\nimport { gridClasses } from \"../../../constants/gridClasses.js\";\nimport { useGridApiMethod } from \"../../utils/useGridApiMethod.js\";\nimport { useGridLogger } from \"../../utils/useGridLogger.js\";\nimport { useGridEvent } from \"../../utils/useGridEvent.js\";\nimport { isNavigationKey } from \"../../../utils/keyboardUtils.js\";\nimport { gridFocusCellSelector, gridFocusColumnGroupHeaderSelector } from \"./gridFocusStateSelector.js\";\nimport { gridVisibleColumnDefinitionsSelector } from \"../columns/gridColumnsSelector.js\";\nimport { getVisibleRows } from \"../../utils/useGridVisibleRows.js\";\nimport { clamp } from \"../../../utils/utils.js\";\nimport { gridPinnedRowsSelector } from \"../rows/gridRowsSelector.js\";\nexport const focusStateInitializer = state => _extends({}, state, {\n  focus: {\n    cell: null,\n    columnHeader: null,\n    columnHeaderFilter: null,\n    columnGroupHeader: null\n  },\n  tabIndex: {\n    cell: null,\n    columnHeader: null,\n    columnHeaderFilter: null,\n    columnGroupHeader: null\n  }\n});\n\n/**\n * @requires useGridParamsApi (method)\n * @requires useGridRows (method)\n * @requires useGridEditing (event)\n */\nexport const useGridFocus = (apiRef, props) => {\n  const logger = useGridLogger(apiRef, 'useGridFocus');\n  const lastClickedCell = React.useRef(null);\n  const hasRootReference = apiRef.current.rootElementRef.current !== null;\n  const publishCellFocusOut = React.useCallback((cell, event) => {\n    if (cell) {\n      // The row might have been deleted\n      if (apiRef.current.getRow(cell.id)) {\n        apiRef.current.publishEvent('cellFocusOut', apiRef.current.getCellParams(cell.id, cell.field), event);\n      }\n    }\n  }, [apiRef]);\n  const setCellFocus = React.useCallback((id, field) => {\n    const focusedCell = gridFocusCellSelector(apiRef);\n    if ((focusedCell === null || focusedCell === void 0 ? void 0 : focusedCell.id) === id && (focusedCell === null || focusedCell === void 0 ? void 0 : focusedCell.field) === field) {\n      return;\n    }\n    apiRef.current.setState(state => {\n      logger.debug(\"Focusing on cell with id=\".concat(id, \" and field=\").concat(field));\n      return _extends({}, state, {\n        tabIndex: {\n          cell: {\n            id,\n            field\n          },\n          columnHeader: null,\n          columnHeaderFilter: null,\n          columnGroupHeader: null\n        },\n        focus: {\n          cell: {\n            id,\n            field\n          },\n          columnHeader: null,\n          columnHeaderFilter: null,\n          columnGroupHeader: null\n        }\n      });\n    });\n\n    // The row might have been deleted\n    if (!apiRef.current.getRow(id)) {\n      return;\n    }\n    if (focusedCell) {\n      // There's a focused cell but another cell was clicked\n      // Publishes an event to notify that the focus was lost\n      publishCellFocusOut(focusedCell, {});\n    }\n    apiRef.current.publishEvent('cellFocusIn', apiRef.current.getCellParams(id, field));\n  }, [apiRef, logger, publishCellFocusOut]);\n  const setColumnHeaderFocus = React.useCallback(function (field) {\n    let event = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    const cell = gridFocusCellSelector(apiRef);\n    publishCellFocusOut(cell, event);\n    apiRef.current.setState(state => {\n      logger.debug(\"Focusing on column header with colIndex=\".concat(field));\n      return _extends({}, state, {\n        tabIndex: {\n          columnHeader: {\n            field\n          },\n          columnHeaderFilter: null,\n          cell: null,\n          columnGroupHeader: null\n        },\n        focus: {\n          columnHeader: {\n            field\n          },\n          columnHeaderFilter: null,\n          cell: null,\n          columnGroupHeader: null\n        }\n      });\n    });\n  }, [apiRef, logger, publishCellFocusOut]);\n  const setColumnHeaderFilterFocus = React.useCallback(function (field) {\n    let event = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    const cell = gridFocusCellSelector(apiRef);\n    publishCellFocusOut(cell, event);\n    apiRef.current.setState(state => {\n      logger.debug(\"Focusing on column header filter with colIndex=\".concat(field));\n      return _extends({}, state, {\n        tabIndex: {\n          columnHeader: null,\n          columnHeaderFilter: {\n            field\n          },\n          cell: null,\n          columnGroupHeader: null\n        },\n        focus: {\n          columnHeader: null,\n          columnHeaderFilter: {\n            field\n          },\n          cell: null,\n          columnGroupHeader: null\n        }\n      });\n    });\n  }, [apiRef, logger, publishCellFocusOut]);\n  const setColumnGroupHeaderFocus = React.useCallback(function (field, depth) {\n    let event = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n    const cell = gridFocusCellSelector(apiRef);\n    if (cell) {\n      apiRef.current.publishEvent('cellFocusOut', apiRef.current.getCellParams(cell.id, cell.field), event);\n    }\n    apiRef.current.setState(state => {\n      return _extends({}, state, {\n        tabIndex: {\n          columnGroupHeader: {\n            field,\n            depth\n          },\n          columnHeader: null,\n          columnHeaderFilter: null,\n          cell: null\n        },\n        focus: {\n          columnGroupHeader: {\n            field,\n            depth\n          },\n          columnHeader: null,\n          columnHeaderFilter: null,\n          cell: null\n        }\n      });\n    });\n  }, [apiRef]);\n  const getColumnGroupHeaderFocus = React.useCallback(() => gridFocusColumnGroupHeaderSelector(apiRef), [apiRef]);\n  const moveFocusToRelativeCell = React.useCallback((id, field, direction) => {\n    let columnIndexToFocus = apiRef.current.getColumnIndex(field);\n    const visibleColumns = gridVisibleColumnDefinitionsSelector(apiRef);\n    const currentPage = getVisibleRows(apiRef, {\n      pagination: props.pagination,\n      paginationMode: props.paginationMode\n    });\n    const pinnedRows = gridPinnedRowsSelector(apiRef);\n\n    // Include pinned rows as well\n    const currentPageRows = [].concat(pinnedRows.top || [], currentPage.rows, pinnedRows.bottom || []);\n    let rowIndexToFocus = currentPageRows.findIndex(row => row.id === id);\n    if (direction === 'right') {\n      columnIndexToFocus += 1;\n    } else if (direction === 'left') {\n      columnIndexToFocus -= 1;\n    } else {\n      rowIndexToFocus += 1;\n    }\n    if (columnIndexToFocus >= visibleColumns.length) {\n      // Go to next row if we are after the last column\n      rowIndexToFocus += 1;\n      if (rowIndexToFocus < currentPageRows.length) {\n        // Go to first column of the next row if there's one more row\n        columnIndexToFocus = 0;\n      }\n    } else if (columnIndexToFocus < 0) {\n      // Go to previous row if we are before the first column\n      rowIndexToFocus -= 1;\n      if (rowIndexToFocus >= 0) {\n        // Go to last column of the previous if there's one more row\n        columnIndexToFocus = visibleColumns.length - 1;\n      }\n    }\n    rowIndexToFocus = clamp(rowIndexToFocus, 0, currentPageRows.length - 1);\n    const rowToFocus = currentPageRows[rowIndexToFocus];\n    if (!rowToFocus) {\n      return;\n    }\n    const colSpanInfo = apiRef.current.unstable_getCellColSpanInfo(rowToFocus.id, columnIndexToFocus);\n    if (colSpanInfo && colSpanInfo.spannedByColSpan) {\n      if (direction === 'left' || direction === 'below') {\n        columnIndexToFocus = colSpanInfo.leftVisibleCellIndex;\n      } else if (direction === 'right') {\n        columnIndexToFocus = colSpanInfo.rightVisibleCellIndex;\n      }\n    }\n    columnIndexToFocus = clamp(columnIndexToFocus, 0, visibleColumns.length - 1);\n    const columnToFocus = visibleColumns[columnIndexToFocus];\n    apiRef.current.setCellFocus(rowToFocus.id, columnToFocus.field);\n  }, [apiRef, props.pagination, props.paginationMode]);\n  const handleCellDoubleClick = React.useCallback(_ref => {\n    let {\n      id,\n      field\n    } = _ref;\n    apiRef.current.setCellFocus(id, field);\n  }, [apiRef]);\n  const handleCellKeyDown = React.useCallback((params, event) => {\n    // GRID_CELL_NAVIGATION_KEY_DOWN handles the focus on Enter, Tab and navigation keys\n    if (event.key === 'Enter' || event.key === 'Tab' || event.key === 'Shift' || isNavigationKey(event.key)) {\n      return;\n    }\n    apiRef.current.setCellFocus(params.id, params.field);\n  }, [apiRef]);\n  const handleColumnHeaderFocus = React.useCallback((_ref2, event) => {\n    let {\n      field\n    } = _ref2;\n    if (event.target !== event.currentTarget) {\n      return;\n    }\n    apiRef.current.setColumnHeaderFocus(field, event);\n  }, [apiRef]);\n  const handleColumnGroupHeaderFocus = React.useCallback((_ref3, event) => {\n    let {\n      fields,\n      depth\n    } = _ref3;\n    if (event.target !== event.currentTarget) {\n      return;\n    }\n    const focusedColumnGroup = gridFocusColumnGroupHeaderSelector(apiRef);\n    if (focusedColumnGroup !== null && focusedColumnGroup.depth === depth && fields.includes(focusedColumnGroup.field)) {\n      // This group cell has already been focused\n      return;\n    }\n    apiRef.current.setColumnGroupHeaderFocus(fields[0], depth, event);\n  }, [apiRef]);\n  const handleBlur = React.useCallback((_, event) => {\n    var _event$relatedTarget;\n    if ((_event$relatedTarget = event.relatedTarget) !== null && _event$relatedTarget !== void 0 && (_event$relatedTarget = _event$relatedTarget.getAttribute('class')) !== null && _event$relatedTarget !== void 0 && _event$relatedTarget.includes(gridClasses.columnHeader)) {\n      return;\n    }\n    logger.debug(\"Clearing focus\");\n    apiRef.current.setState(state => _extends({}, state, {\n      focus: {\n        cell: null,\n        columnHeader: null,\n        columnHeaderFilter: null,\n        columnGroupHeader: null\n      }\n    }));\n  }, [logger, apiRef]);\n  const handleCellMouseDown = React.useCallback(params => {\n    lastClickedCell.current = params;\n  }, []);\n  const handleDocumentClick = React.useCallback(event => {\n    const cellParams = lastClickedCell.current;\n    lastClickedCell.current = null;\n    const focusedCell = gridFocusCellSelector(apiRef);\n    const canUpdateFocus = apiRef.current.unstable_applyPipeProcessors('canUpdateFocus', true, {\n      event,\n      cell: cellParams\n    });\n    if (!canUpdateFocus) {\n      return;\n    }\n    if (!focusedCell) {\n      if (cellParams) {\n        apiRef.current.setCellFocus(cellParams.id, cellParams.field);\n      }\n      return;\n    }\n    if ((cellParams === null || cellParams === void 0 ? void 0 : cellParams.id) === focusedCell.id && (cellParams === null || cellParams === void 0 ? void 0 : cellParams.field) === focusedCell.field) {\n      return;\n    }\n    const cellElement = apiRef.current.getCellElement(focusedCell.id, focusedCell.field);\n    if (cellElement !== null && cellElement !== void 0 && cellElement.contains(event.target)) {\n      return;\n    }\n    if (cellParams) {\n      apiRef.current.setCellFocus(cellParams.id, cellParams.field);\n    } else {\n      apiRef.current.setState(state => _extends({}, state, {\n        focus: {\n          cell: null,\n          columnHeader: null,\n          columnHeaderFilter: null,\n          columnGroupHeader: null\n        }\n      }));\n\n      // There's a focused cell but another element (not a cell) was clicked\n      // Publishes an event to notify that the focus was lost\n      publishCellFocusOut(focusedCell, event);\n    }\n  }, [apiRef, publishCellFocusOut]);\n  const handleCellModeChange = React.useCallback(params => {\n    if (params.cellMode === 'view') {\n      return;\n    }\n    const cell = gridFocusCellSelector(apiRef);\n    if ((cell === null || cell === void 0 ? void 0 : cell.id) !== params.id || (cell === null || cell === void 0 ? void 0 : cell.field) !== params.field) {\n      apiRef.current.setCellFocus(params.id, params.field);\n    }\n  }, [apiRef]);\n  const handleRowSet = React.useCallback(() => {\n    const cell = gridFocusCellSelector(apiRef);\n\n    // If the focused cell is in a row which does not exist anymore,\n    // focus previous row or remove the focus\n    if (cell && !apiRef.current.getRow(cell.id)) {\n      const lastFocusedRowId = cell.id;\n      let nextRowId = null;\n      if (typeof lastFocusedRowId !== 'undefined') {\n        var _nextRow$id;\n        const rowEl = apiRef.current.getRowElement(lastFocusedRowId);\n        const lastFocusedRowIndex = rowEl !== null && rowEl !== void 0 && rowEl.dataset.rowindex ? Number(rowEl === null || rowEl === void 0 ? void 0 : rowEl.dataset.rowindex) : 0;\n        const currentPage = getVisibleRows(apiRef, {\n          pagination: props.pagination,\n          paginationMode: props.paginationMode\n        });\n        const nextRow = currentPage.rows[clamp(lastFocusedRowIndex, 0, currentPage.rows.length - 1)];\n        nextRowId = (_nextRow$id = nextRow === null || nextRow === void 0 ? void 0 : nextRow.id) !== null && _nextRow$id !== void 0 ? _nextRow$id : null;\n      }\n      apiRef.current.setState(state => _extends({}, state, {\n        focus: {\n          cell: nextRowId === null ? null : {\n            id: nextRowId,\n            field: cell.field\n          },\n          columnHeader: null,\n          columnHeaderFilter: null,\n          columnGroupHeader: null\n        }\n      }));\n    }\n  }, [apiRef, props.pagination, props.paginationMode]);\n  const handlePaginationModelChange = useEventCallback(() => {\n    const currentFocusedCell = gridFocusCellSelector(apiRef);\n    if (!currentFocusedCell) {\n      return;\n    }\n    const currentPage = getVisibleRows(apiRef, {\n      pagination: props.pagination,\n      paginationMode: props.paginationMode\n    });\n    const rowIsInCurrentPage = currentPage.rows.find(row => row.id === currentFocusedCell.id);\n    if (rowIsInCurrentPage || currentPage.rows.length === 0) {\n      return;\n    }\n    const visibleColumns = gridVisibleColumnDefinitionsSelector(apiRef);\n    apiRef.current.setState(state => {\n      return _extends({}, state, {\n        tabIndex: {\n          cell: {\n            id: currentPage.rows[0].id,\n            field: visibleColumns[0].field\n          },\n          columnGroupHeader: null,\n          columnHeader: null,\n          columnHeaderFilter: null\n        }\n      });\n    });\n  });\n  const focusApi = {\n    setCellFocus,\n    setColumnHeaderFocus,\n    setColumnHeaderFilterFocus\n  };\n  const focusPrivateApi = {\n    moveFocusToRelativeCell,\n    setColumnGroupHeaderFocus,\n    getColumnGroupHeaderFocus\n  };\n  useGridApiMethod(apiRef, focusApi, 'public');\n  useGridApiMethod(apiRef, focusPrivateApi, 'private');\n  React.useEffect(() => {\n    const doc = ownerDocument(apiRef.current.rootElementRef.current);\n    doc.addEventListener('mouseup', handleDocumentClick);\n    return () => {\n      doc.removeEventListener('mouseup', handleDocumentClick);\n    };\n  }, [apiRef, hasRootReference, handleDocumentClick]);\n  useGridEvent(apiRef, 'columnHeaderBlur', handleBlur);\n  useGridEvent(apiRef, 'cellDoubleClick', handleCellDoubleClick);\n  useGridEvent(apiRef, 'cellMouseDown', handleCellMouseDown);\n  useGridEvent(apiRef, 'cellKeyDown', handleCellKeyDown);\n  useGridEvent(apiRef, 'cellModeChange', handleCellModeChange);\n  useGridEvent(apiRef, 'columnHeaderFocus', handleColumnHeaderFocus);\n  useGridEvent(apiRef, 'columnGroupHeaderFocus', handleColumnGroupHeaderFocus);\n  useGridEvent(apiRef, 'rowsSet', handleRowSet);\n  useGridEvent(apiRef, 'paginationModelChange', handlePaginationModelChange);\n};","map":{"version":3,"names":["_extends","React","useEventCallback","ownerDocument","gridClasses","useGridApiMethod","useGridLogger","useGridEvent","isNavigationKey","gridFocusCellSelector","gridFocusColumnGroupHeaderSelector","gridVisibleColumnDefinitionsSelector","getVisibleRows","clamp","gridPinnedRowsSelector","focusStateInitializer","state","focus","cell","columnHeader","columnHeaderFilter","columnGroupHeader","tabIndex","useGridFocus","apiRef","props","logger","lastClickedCell","useRef","hasRootReference","current","rootElementRef","publishCellFocusOut","useCallback","event","getRow","id","publishEvent","getCellParams","field","setCellFocus","focusedCell","setState","debug","concat","setColumnHeaderFocus","arguments","length","undefined","setColumnHeaderFilterFocus","setColumnGroupHeaderFocus","depth","getColumnGroupHeaderFocus","moveFocusToRelativeCell","direction","columnIndexToFocus","getColumnIndex","visibleColumns","currentPage","pagination","paginationMode","pinnedRows","currentPageRows","top","rows","bottom","rowIndexToFocus","findIndex","row","rowToFocus","colSpanInfo","unstable_getCellColSpanInfo","spannedByColSpan","leftVisibleCellIndex","rightVisibleCellIndex","columnToFocus","handleCellDoubleClick","_ref","handleCellKeyDown","params","key","handleColumnHeaderFocus","_ref2","target","currentTarget","handleColumnGroupHeaderFocus","_ref3","fields","focusedColumnGroup","includes","handleBlur","_","_event$relatedTarget","relatedTarget","getAttribute","handleCellMouseDown","handleDocumentClick","cellParams","canUpdateFocus","unstable_applyPipeProcessors","cellElement","getCellElement","contains","handleCellModeChange","cellMode","handleRowSet","lastFocusedRowId","nextRowId","_nextRow$id","rowEl","getRowElement","lastFocusedRowIndex","dataset","rowindex","Number","nextRow","handlePaginationModelChange","currentFocusedCell","rowIsInCurrentPage","find","focusApi","focusPrivateApi","useEffect","doc","addEventListener","removeEventListener"],"sources":["C:/Users/mis/rbt-dashboard/node_modules/@mui/x-data-grid/esm/hooks/features/focus/useGridFocus.js"],"sourcesContent":["'use client';\n\nimport _extends from \"@babel/runtime/helpers/esm/extends\";\nimport * as React from 'react';\nimport useEventCallback from '@mui/utils/useEventCallback';\nimport ownerDocument from '@mui/utils/ownerDocument';\nimport { gridClasses } from \"../../../constants/gridClasses.js\";\nimport { useGridApiMethod } from \"../../utils/useGridApiMethod.js\";\nimport { useGridLogger } from \"../../utils/useGridLogger.js\";\nimport { useGridEvent } from \"../../utils/useGridEvent.js\";\nimport { isNavigationKey } from \"../../../utils/keyboardUtils.js\";\nimport { gridFocusCellSelector, gridFocusColumnGroupHeaderSelector } from \"./gridFocusStateSelector.js\";\nimport { gridVisibleColumnDefinitionsSelector } from \"../columns/gridColumnsSelector.js\";\nimport { getVisibleRows } from \"../../utils/useGridVisibleRows.js\";\nimport { clamp } from \"../../../utils/utils.js\";\nimport { gridPinnedRowsSelector } from \"../rows/gridRowsSelector.js\";\nexport const focusStateInitializer = state => _extends({}, state, {\n  focus: {\n    cell: null,\n    columnHeader: null,\n    columnHeaderFilter: null,\n    columnGroupHeader: null\n  },\n  tabIndex: {\n    cell: null,\n    columnHeader: null,\n    columnHeaderFilter: null,\n    columnGroupHeader: null\n  }\n});\n\n/**\n * @requires useGridParamsApi (method)\n * @requires useGridRows (method)\n * @requires useGridEditing (event)\n */\nexport const useGridFocus = (apiRef, props) => {\n  const logger = useGridLogger(apiRef, 'useGridFocus');\n  const lastClickedCell = React.useRef(null);\n  const hasRootReference = apiRef.current.rootElementRef.current !== null;\n  const publishCellFocusOut = React.useCallback((cell, event) => {\n    if (cell) {\n      // The row might have been deleted\n      if (apiRef.current.getRow(cell.id)) {\n        apiRef.current.publishEvent('cellFocusOut', apiRef.current.getCellParams(cell.id, cell.field), event);\n      }\n    }\n  }, [apiRef]);\n  const setCellFocus = React.useCallback((id, field) => {\n    const focusedCell = gridFocusCellSelector(apiRef);\n    if (focusedCell?.id === id && focusedCell?.field === field) {\n      return;\n    }\n    apiRef.current.setState(state => {\n      logger.debug(`Focusing on cell with id=${id} and field=${field}`);\n      return _extends({}, state, {\n        tabIndex: {\n          cell: {\n            id,\n            field\n          },\n          columnHeader: null,\n          columnHeaderFilter: null,\n          columnGroupHeader: null\n        },\n        focus: {\n          cell: {\n            id,\n            field\n          },\n          columnHeader: null,\n          columnHeaderFilter: null,\n          columnGroupHeader: null\n        }\n      });\n    });\n\n    // The row might have been deleted\n    if (!apiRef.current.getRow(id)) {\n      return;\n    }\n    if (focusedCell) {\n      // There's a focused cell but another cell was clicked\n      // Publishes an event to notify that the focus was lost\n      publishCellFocusOut(focusedCell, {});\n    }\n    apiRef.current.publishEvent('cellFocusIn', apiRef.current.getCellParams(id, field));\n  }, [apiRef, logger, publishCellFocusOut]);\n  const setColumnHeaderFocus = React.useCallback((field, event = {}) => {\n    const cell = gridFocusCellSelector(apiRef);\n    publishCellFocusOut(cell, event);\n    apiRef.current.setState(state => {\n      logger.debug(`Focusing on column header with colIndex=${field}`);\n      return _extends({}, state, {\n        tabIndex: {\n          columnHeader: {\n            field\n          },\n          columnHeaderFilter: null,\n          cell: null,\n          columnGroupHeader: null\n        },\n        focus: {\n          columnHeader: {\n            field\n          },\n          columnHeaderFilter: null,\n          cell: null,\n          columnGroupHeader: null\n        }\n      });\n    });\n  }, [apiRef, logger, publishCellFocusOut]);\n  const setColumnHeaderFilterFocus = React.useCallback((field, event = {}) => {\n    const cell = gridFocusCellSelector(apiRef);\n    publishCellFocusOut(cell, event);\n    apiRef.current.setState(state => {\n      logger.debug(`Focusing on column header filter with colIndex=${field}`);\n      return _extends({}, state, {\n        tabIndex: {\n          columnHeader: null,\n          columnHeaderFilter: {\n            field\n          },\n          cell: null,\n          columnGroupHeader: null\n        },\n        focus: {\n          columnHeader: null,\n          columnHeaderFilter: {\n            field\n          },\n          cell: null,\n          columnGroupHeader: null\n        }\n      });\n    });\n  }, [apiRef, logger, publishCellFocusOut]);\n  const setColumnGroupHeaderFocus = React.useCallback((field, depth, event = {}) => {\n    const cell = gridFocusCellSelector(apiRef);\n    if (cell) {\n      apiRef.current.publishEvent('cellFocusOut', apiRef.current.getCellParams(cell.id, cell.field), event);\n    }\n    apiRef.current.setState(state => {\n      return _extends({}, state, {\n        tabIndex: {\n          columnGroupHeader: {\n            field,\n            depth\n          },\n          columnHeader: null,\n          columnHeaderFilter: null,\n          cell: null\n        },\n        focus: {\n          columnGroupHeader: {\n            field,\n            depth\n          },\n          columnHeader: null,\n          columnHeaderFilter: null,\n          cell: null\n        }\n      });\n    });\n  }, [apiRef]);\n  const getColumnGroupHeaderFocus = React.useCallback(() => gridFocusColumnGroupHeaderSelector(apiRef), [apiRef]);\n  const moveFocusToRelativeCell = React.useCallback((id, field, direction) => {\n    let columnIndexToFocus = apiRef.current.getColumnIndex(field);\n    const visibleColumns = gridVisibleColumnDefinitionsSelector(apiRef);\n    const currentPage = getVisibleRows(apiRef, {\n      pagination: props.pagination,\n      paginationMode: props.paginationMode\n    });\n    const pinnedRows = gridPinnedRowsSelector(apiRef);\n\n    // Include pinned rows as well\n    const currentPageRows = [].concat(pinnedRows.top || [], currentPage.rows, pinnedRows.bottom || []);\n    let rowIndexToFocus = currentPageRows.findIndex(row => row.id === id);\n    if (direction === 'right') {\n      columnIndexToFocus += 1;\n    } else if (direction === 'left') {\n      columnIndexToFocus -= 1;\n    } else {\n      rowIndexToFocus += 1;\n    }\n    if (columnIndexToFocus >= visibleColumns.length) {\n      // Go to next row if we are after the last column\n      rowIndexToFocus += 1;\n      if (rowIndexToFocus < currentPageRows.length) {\n        // Go to first column of the next row if there's one more row\n        columnIndexToFocus = 0;\n      }\n    } else if (columnIndexToFocus < 0) {\n      // Go to previous row if we are before the first column\n      rowIndexToFocus -= 1;\n      if (rowIndexToFocus >= 0) {\n        // Go to last column of the previous if there's one more row\n        columnIndexToFocus = visibleColumns.length - 1;\n      }\n    }\n    rowIndexToFocus = clamp(rowIndexToFocus, 0, currentPageRows.length - 1);\n    const rowToFocus = currentPageRows[rowIndexToFocus];\n    if (!rowToFocus) {\n      return;\n    }\n    const colSpanInfo = apiRef.current.unstable_getCellColSpanInfo(rowToFocus.id, columnIndexToFocus);\n    if (colSpanInfo && colSpanInfo.spannedByColSpan) {\n      if (direction === 'left' || direction === 'below') {\n        columnIndexToFocus = colSpanInfo.leftVisibleCellIndex;\n      } else if (direction === 'right') {\n        columnIndexToFocus = colSpanInfo.rightVisibleCellIndex;\n      }\n    }\n    columnIndexToFocus = clamp(columnIndexToFocus, 0, visibleColumns.length - 1);\n    const columnToFocus = visibleColumns[columnIndexToFocus];\n    apiRef.current.setCellFocus(rowToFocus.id, columnToFocus.field);\n  }, [apiRef, props.pagination, props.paginationMode]);\n  const handleCellDoubleClick = React.useCallback(({\n    id,\n    field\n  }) => {\n    apiRef.current.setCellFocus(id, field);\n  }, [apiRef]);\n  const handleCellKeyDown = React.useCallback((params, event) => {\n    // GRID_CELL_NAVIGATION_KEY_DOWN handles the focus on Enter, Tab and navigation keys\n    if (event.key === 'Enter' || event.key === 'Tab' || event.key === 'Shift' || isNavigationKey(event.key)) {\n      return;\n    }\n    apiRef.current.setCellFocus(params.id, params.field);\n  }, [apiRef]);\n  const handleColumnHeaderFocus = React.useCallback(({\n    field\n  }, event) => {\n    if (event.target !== event.currentTarget) {\n      return;\n    }\n    apiRef.current.setColumnHeaderFocus(field, event);\n  }, [apiRef]);\n  const handleColumnGroupHeaderFocus = React.useCallback(({\n    fields,\n    depth\n  }, event) => {\n    if (event.target !== event.currentTarget) {\n      return;\n    }\n    const focusedColumnGroup = gridFocusColumnGroupHeaderSelector(apiRef);\n    if (focusedColumnGroup !== null && focusedColumnGroup.depth === depth && fields.includes(focusedColumnGroup.field)) {\n      // This group cell has already been focused\n      return;\n    }\n    apiRef.current.setColumnGroupHeaderFocus(fields[0], depth, event);\n  }, [apiRef]);\n  const handleBlur = React.useCallback((_, event) => {\n    if (event.relatedTarget?.getAttribute('class')?.includes(gridClasses.columnHeader)) {\n      return;\n    }\n    logger.debug(`Clearing focus`);\n    apiRef.current.setState(state => _extends({}, state, {\n      focus: {\n        cell: null,\n        columnHeader: null,\n        columnHeaderFilter: null,\n        columnGroupHeader: null\n      }\n    }));\n  }, [logger, apiRef]);\n  const handleCellMouseDown = React.useCallback(params => {\n    lastClickedCell.current = params;\n  }, []);\n  const handleDocumentClick = React.useCallback(event => {\n    const cellParams = lastClickedCell.current;\n    lastClickedCell.current = null;\n    const focusedCell = gridFocusCellSelector(apiRef);\n    const canUpdateFocus = apiRef.current.unstable_applyPipeProcessors('canUpdateFocus', true, {\n      event,\n      cell: cellParams\n    });\n    if (!canUpdateFocus) {\n      return;\n    }\n    if (!focusedCell) {\n      if (cellParams) {\n        apiRef.current.setCellFocus(cellParams.id, cellParams.field);\n      }\n      return;\n    }\n    if (cellParams?.id === focusedCell.id && cellParams?.field === focusedCell.field) {\n      return;\n    }\n    const cellElement = apiRef.current.getCellElement(focusedCell.id, focusedCell.field);\n    if (cellElement?.contains(event.target)) {\n      return;\n    }\n    if (cellParams) {\n      apiRef.current.setCellFocus(cellParams.id, cellParams.field);\n    } else {\n      apiRef.current.setState(state => _extends({}, state, {\n        focus: {\n          cell: null,\n          columnHeader: null,\n          columnHeaderFilter: null,\n          columnGroupHeader: null\n        }\n      }));\n\n      // There's a focused cell but another element (not a cell) was clicked\n      // Publishes an event to notify that the focus was lost\n      publishCellFocusOut(focusedCell, event);\n    }\n  }, [apiRef, publishCellFocusOut]);\n  const handleCellModeChange = React.useCallback(params => {\n    if (params.cellMode === 'view') {\n      return;\n    }\n    const cell = gridFocusCellSelector(apiRef);\n    if (cell?.id !== params.id || cell?.field !== params.field) {\n      apiRef.current.setCellFocus(params.id, params.field);\n    }\n  }, [apiRef]);\n  const handleRowSet = React.useCallback(() => {\n    const cell = gridFocusCellSelector(apiRef);\n\n    // If the focused cell is in a row which does not exist anymore,\n    // focus previous row or remove the focus\n    if (cell && !apiRef.current.getRow(cell.id)) {\n      const lastFocusedRowId = cell.id;\n      let nextRowId = null;\n      if (typeof lastFocusedRowId !== 'undefined') {\n        const rowEl = apiRef.current.getRowElement(lastFocusedRowId);\n        const lastFocusedRowIndex = rowEl?.dataset.rowindex ? Number(rowEl?.dataset.rowindex) : 0;\n        const currentPage = getVisibleRows(apiRef, {\n          pagination: props.pagination,\n          paginationMode: props.paginationMode\n        });\n        const nextRow = currentPage.rows[clamp(lastFocusedRowIndex, 0, currentPage.rows.length - 1)];\n        nextRowId = nextRow?.id ?? null;\n      }\n      apiRef.current.setState(state => _extends({}, state, {\n        focus: {\n          cell: nextRowId === null ? null : {\n            id: nextRowId,\n            field: cell.field\n          },\n          columnHeader: null,\n          columnHeaderFilter: null,\n          columnGroupHeader: null\n        }\n      }));\n    }\n  }, [apiRef, props.pagination, props.paginationMode]);\n  const handlePaginationModelChange = useEventCallback(() => {\n    const currentFocusedCell = gridFocusCellSelector(apiRef);\n    if (!currentFocusedCell) {\n      return;\n    }\n    const currentPage = getVisibleRows(apiRef, {\n      pagination: props.pagination,\n      paginationMode: props.paginationMode\n    });\n    const rowIsInCurrentPage = currentPage.rows.find(row => row.id === currentFocusedCell.id);\n    if (rowIsInCurrentPage || currentPage.rows.length === 0) {\n      return;\n    }\n    const visibleColumns = gridVisibleColumnDefinitionsSelector(apiRef);\n    apiRef.current.setState(state => {\n      return _extends({}, state, {\n        tabIndex: {\n          cell: {\n            id: currentPage.rows[0].id,\n            field: visibleColumns[0].field\n          },\n          columnGroupHeader: null,\n          columnHeader: null,\n          columnHeaderFilter: null\n        }\n      });\n    });\n  });\n  const focusApi = {\n    setCellFocus,\n    setColumnHeaderFocus,\n    setColumnHeaderFilterFocus\n  };\n  const focusPrivateApi = {\n    moveFocusToRelativeCell,\n    setColumnGroupHeaderFocus,\n    getColumnGroupHeaderFocus\n  };\n  useGridApiMethod(apiRef, focusApi, 'public');\n  useGridApiMethod(apiRef, focusPrivateApi, 'private');\n  React.useEffect(() => {\n    const doc = ownerDocument(apiRef.current.rootElementRef.current);\n    doc.addEventListener('mouseup', handleDocumentClick);\n    return () => {\n      doc.removeEventListener('mouseup', handleDocumentClick);\n    };\n  }, [apiRef, hasRootReference, handleDocumentClick]);\n  useGridEvent(apiRef, 'columnHeaderBlur', handleBlur);\n  useGridEvent(apiRef, 'cellDoubleClick', handleCellDoubleClick);\n  useGridEvent(apiRef, 'cellMouseDown', handleCellMouseDown);\n  useGridEvent(apiRef, 'cellKeyDown', handleCellKeyDown);\n  useGridEvent(apiRef, 'cellModeChange', handleCellModeChange);\n  useGridEvent(apiRef, 'columnHeaderFocus', handleColumnHeaderFocus);\n  useGridEvent(apiRef, 'columnGroupHeaderFocus', handleColumnGroupHeaderFocus);\n  useGridEvent(apiRef, 'rowsSet', handleRowSet);\n  useGridEvent(apiRef, 'paginationModelChange', handlePaginationModelChange);\n};"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}